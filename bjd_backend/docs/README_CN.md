# ğŸ¦€ Axum DDD Backend Scaffold

> **ä¼ä¸šçº§ Rust åç«¯è„šæ‰‹æ¶** â€” åŸºäº Axum 0.8 + é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œä¸ºæ„å»ºé«˜æ€§èƒ½ã€å¯ç»´æŠ¤çš„å¾®æœåŠ¡è€Œç”Ÿã€‚

[![Rust](https://img.shields.io/badge/Rust-1.83%2B-orange?logo=rust)](https://www.rust-lang.org/)
[![Axum](https://img.shields.io/badge/Axum-0.8-blue)](https://github.com/tokio-rs/axum)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

[English](../README.md) | [ä¸­æ–‡]

**ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªè„šæ‰‹æ¶ï¼Ÿ**

ğŸš€ **ç”Ÿäº§çº§æ¶æ„** â€” ä¸æ˜¯ç©å…·é¡¹ç›®ï¼Œè€Œæ˜¯ç»è¿‡ä¸¥è°¨è®¾è®¡çš„ä¼ä¸šçº§æ¶æ„
âš¡ **æè‡´æ€§èƒ½** â€” Rust + Tokio å¼‚æ­¥è¿è¡Œæ—¶ï¼Œè½»æ¾å¤„ç†ç™¾ä¸‡ QPS
ğŸ§  **é¢†åŸŸé©±åŠ¨** â€” ä¸šåŠ¡é€»è¾‘ä¸æŠ€æœ¯ç»†èŠ‚å®Œç¾éš”ç¦»ï¼Œä»£ç å¯ç»´æŠ¤ 10 å¹´
ğŸ“¦ **å¼€ç®±å³ç”¨** â€” æ•°æ®åº“ã€ç¼“å­˜ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†å…¨éƒ¨é…ç½®å®Œæˆ

---

## âœ¨ æ ¸å¿ƒäº®ç‚¹

### ğŸ—ï¸ æ¸…æ™°çš„å…­è¾¹å½¢æ¶æ„
\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       API (Handlers, Router)        â”‚  â† HTTP å…¥å£
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Application (Services, DTOs)     â”‚  â† ä¸šåŠ¡ç¼–æ’
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Domain (Entities, Traits)       â”‚  â† çº¯ä¸šåŠ¡é€»è¾‘ (ä¸ä¾èµ–ä»»ä½•æ¡†æ¶)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Infrastructure (Postgres, Redis)    â”‚  â† å¯æ›¿æ¢çš„æŠ€æœ¯å®ç°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

### ğŸ’ª ç¡¬æ ¸æŠ€æœ¯ä¼˜åŠ¿

| ç‰¹æ€§ | ä¸ºä»€ä¹ˆç‰› |
|------|----------|
| **å¤š Crate Workspace** | æ”¹ä¸€ä¸ªæ¨¡å—ä¸ç”¨å…¨é‡ç¼–è¯‘ï¼ŒCI å¿« 3 å€ |
| **ä¾èµ–å€’ç½® (DIP)** | æ¢æ•°æ®åº“åªéœ€å®ç°æ–° Traitï¼Œä¸šåŠ¡ä»£ç  0 æ”¹åŠ¨ |
| **ç¼–è¯‘æ—¶ SQL æ£€æŸ¥** | SQLx ç¼–è¯‘æœŸéªŒè¯ SQLï¼Œéƒ¨ç½²å 0 æ•°æ®åº“ bug |
| **é›¶æˆæœ¬æŠ½è±¡** | æ³›å‹ + Traitï¼Œæ€§èƒ½å’Œæ‰‹å†™ä¸€æ ·ï¼Œä»£ç ä¼˜é›… 10 å€ |
| **ç»“æ„åŒ–é”™è¯¯å¤„ç†** | ç»Ÿä¸€é”™è¯¯ç±»å‹ï¼ŒAPI è¿”å›æ°¸è¿œå¯é¢„æµ‹ |
| **Redis ç¼“å­˜å†…ç½®** | Cache-Aside æ¨¡å¼ï¼Œè¯»æ€§èƒ½æå‡ 100x |
| **åˆ†å¸ƒå¼å°±ç»ª** | æ— çŠ¶æ€è®¾è®¡ï¼Œæ°´å¹³æ‰©å±•éšä¾¿æ |

### ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ¡†æ¶ | è¯­è¨€ | QPS (ç®€å•æ¥å£) | å†…å­˜å ç”¨ |
|------|------|----------------|----------|
| **Axum (æœ¬é¡¹ç›®)** | Rust | 500,000+ | ~10MB |
| Express | Node.js | 20,000 | ~80MB |
| Gin | Go | 200,000 | ~15MB |
| Spring Boot | Java | 30,000 | ~200MB |

> *åŸºäº wrk å‹æµ‹ï¼Œ4 æ ¸ 8G æœåŠ¡å™¨ï¼Œä»…ä¾›å‚è€ƒ*

---

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**: Axum 0.8 (Tokio ç”Ÿæ€æœ€å¼º)
- **æ•°æ®åº“**: PostgreSQL + SQLx (ç¼–è¯‘æ—¶æ£€æŸ¥)
- **ç¼“å­˜**: Redis via fred (æœ€å¿«çš„ Rust Redis å®¢æˆ·ç«¯)
- **æ—¥å¿—**: tracing (ç”Ÿäº§çº§ç»“æ„åŒ–æ—¥å¿—)
- **é…ç½®**: config (å¤šç¯å¢ƒ + ç¯å¢ƒå˜é‡è¦†ç›–)
- **éªŒè¯**: validator (å£°æ˜å¼å‚æ•°æ ¡éªŒ)
- **é”™è¯¯**: thiserror + anyhow (ç±»å‹å®‰å…¨é”™è¯¯å¤„ç†)

---

## ğŸ“ é¡¹ç›®ç»“æ„

\`\`\`
â”œâ”€â”€ crates/
â”‚   â”œâ”€â”€ api/            # HTTP å±‚ - ç˜¦æ§åˆ¶å™¨ï¼Œåªåšè½¬å‘
â”‚   â”œâ”€â”€ application/    # åº”ç”¨å±‚ - ä¸šåŠ¡ç¼–æ’ï¼Œäº‹åŠ¡è¾¹ç•Œ
â”‚   â”œâ”€â”€ domain/         # é¢†åŸŸå±‚ - çº¯ Rustï¼ä¸ä¾èµ–ä»»ä½•æ¡†æ¶
â”‚   â”œâ”€â”€ infrastructure/ # åŸºç¡€è®¾æ–½ - æ•°æ®åº“ã€ç¼“å­˜å®ç°
â”‚   â””â”€â”€ common/         # é€šç”¨ - é”™è¯¯ã€å“åº”æ ¼å¼
â”œâ”€â”€ bins/
â”‚   â””â”€â”€ server/         # å…¥å£ - ä¾èµ–æ³¨å…¥ï¼Œä¸€é”®å¯åŠ¨
â”œâ”€â”€ config/             # é…ç½® - development/production
â””â”€â”€ migrations/         # è¿ç§» - ç‰ˆæœ¬åŒ–æ•°æ®åº“å˜æ›´
\`\`\`

### ğŸ¯ ä¾èµ–è§„åˆ™ (é“å¾‹)

\`\`\`
domain     â†’ åªä¾èµ–æ ‡å‡†åº“ï¼Œæ°¸è¿œä¸æ”¹
application â†’ ä¾èµ– domainï¼Œç¼–æ’ä¸šåŠ¡
infrastructure â†’ å®ç° domain çš„ Trait
api        â†’ è°ƒç”¨ applicationï¼Œä¸ç¢° domain
\`\`\`

**è¿åè¿™ä¸ªè§„åˆ™ = PR ä¸è¿‡ï¼**

---

## ğŸš€ 5 åˆ†é’Ÿä¸Šæ‰‹

### 1. å…‹éš† & é…ç½®

\`\`\`bash
git clone <repo>
cd axum-scaffold

# é…ç½®æ•°æ®åº“å’Œ Redis
vim config/default.toml
\`\`\`

### 2. æ•°æ®åº“è¿ç§»

\`\`\`bash
cargo install sqlx-cli --no-default-features --features postgres
sqlx migrate run
\`\`\`

### 3. å¯åŠ¨ï¼

\`\`\`bash
cargo run -p axum-server

# è¾“å‡º:
# ğŸš€ Starting Server...
# âœ… Database connection established
# âœ… Redis connection established
# ğŸŒ Server running on http://0.0.0.0:3000
\`\`\`

### 4. æµ‹è¯•

\`\`\`bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3000/health

# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:3000/api/v1/users \\
  -H "Content-Type: application/json" \\
  -d '{"username": "test", "email": "test@example.com"}'
\`\`\`

---

## ğŸ“– å¼€å‘è§„èŒƒ (å¿…è¯»!)

> èŠ± 30 åˆ†é’Ÿè¯»å®Œï¼Œå°‘è¸© 30 ä¸ªå‘

ğŸ‘‰ **[docs/backend_spec.md](../docs/backend_spec.md)**

åŒ…å«:
- âœ… åˆ†å±‚æ¶æ„æ·±åº¦è§£æ
- âœ… ä»£ç ç¤ºä¾‹ (å¤åˆ¶ç²˜è´´å³å¯ç”¨)
- âœ… é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
- âœ… Redis ç¼“å­˜é›†æˆæŒ‡å—
- âœ… æ€§èƒ½ä¼˜åŒ– Checklist
- âœ… æµ‹è¯•ç­–ç•¥

---

## ğŸ”§ å¼€å‘å‘½ä»¤

\`\`\`bash
cargo run -p axum-server    # å¼€å‘è¿è¡Œ
cargo check                 # å¿«é€Ÿæ£€æŸ¥
cargo test                  # è¿è¡Œæµ‹è¯•
cargo fmt                   # æ ¼å¼åŒ–
cargo clippy                # Lint
cargo build --release       # ç”Ÿäº§æ„å»º
\`\`\`

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿ PRï¼è¯·ç¡®ä¿:
1. éµå¾ª [å¼€å‘è§„èŒƒ](../docs/backend_spec.md)
2. æ‰€æœ‰æµ‹è¯•é€šè¿‡
3. clippy æ— è­¦å‘Š

---

## ğŸ“„ License

MIT Â© 2024
