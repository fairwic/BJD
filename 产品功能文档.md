# BJD 团购平台（拼团大师）产品功能文档

## 📋 文档信息
- **项目名称**：GOMaster / 拼团大师
- **版本号**：v2.0.0 (全页面覆盖版)
- **迭代重点**：`全量35页面` `用户操作流` `异常兜底`
- **页面清单来源**：`src/pages/*.jsx`

---

## 一、P0 核心业务 (Core/MVP)

---

### 模块 1：用户认证体系

#### 1.1 登录注册 (`Login.jsx`)
**页面职责**：平台唯一入口，支持验证码/密码双模式登录及第三方授权。

**用户操作全流程**：

| 步骤 | 用户操作 | 系统响应 |
|---|---|---|
| 1.打开App | 冷启动 | 展示全屏BJD背景图(模糊缩放动效)，0.5s后底部弹出半屏登录卡片 |
| 2.聚焦手机号 | 点击输入框 | 呼起数字键盘，边框变Rose-500 |
| 3.输入手机号 | 逐位输入 | 实时格式化为 `138 1234 5678`；满11位后「获取验证码」按钮高亮 |
| 4.发送验证码 | 点击按钮 | 按钮变Loading->60s倒计时；顶部Toast"验证码已发送" |
| 5.输入验证码 | 输入6位 | 每格高亮；满6位自动提交(无需点登录)；全屏Loading蒙层 |
| 6a.验证成功(老用户) | - | 跳转首页，登录卡片下沉动画 |
| 6b.验证成功(新用户) | - | 跳转「完善资料页」(设置昵称头像) |
| 6c.验证失败 | - | 输入框Shake动画，清空内容，允许重试 |

**异常规则**：
- 60秒内重复点击发送：按钮置灰，Toast"请稀后再试"
- 网络断开：Toast"网络异常"，保留已输入手机号

---

#### 1.2 忘记密码 (`ForgotPassword.jsx`)
**页面职责**：通过手机验证码重置密码。

**用户操作全流程**：

| 步骤 | 用户操作 | 系统响应 |
|---|---|---|
| 1.输入手机号 | 输入11位 | 同登录页格式化，「下一步」按钮高亮 |
| 2.验证身份 | 输入验证码 | 校验通过后解锁「新密码」输入框 |
| 3.设置新密码 | 输入≥6位 | 实时显示密码强度条(弱/中/强) |
| 4.确认 | 点击「重置密码」 | 成功后跳转登录页，Toast"密码已重置" |

---

#### 1.3 实名认证 (`RealNameVerification.jsx`)
**页面职责**：身份证OCR识别+公安API校验，团长开团/高额交易前置条件。

**用户操作全流程**：

| 步骤 | 用户操作 | 系统响应 |
|---|---|---|
| 1.触发入口 | 点击「发起团购」 | 检测未实名->Modal拦截"请先完成实名认证" |
| 2.上传人像面 | 点击相机区域 | 调用系统相机/相册；上传后显示"扫描中..."光效 |
| 3.OCR回填 | - | 自动填入「姓名」「身份证号」输入框 |
| 4.上传国徽面 | 点击相机区域 | 同上 |
| 5.手动校对 | 可编辑文字 | 允许修正生僻字 |
| 6.提交 | 点击「提交认证」 | 按钮变灰"审核中..."; 1-2s后弹出金盾Lottie动画 |
| 7.完成 | - | 自动返回上一页，头像增加V标 |

**异常规则**：
- 姓名与身份证不符：红字提示"姓名与证件号不匹配"
- 已被其他账号绑定：Toast"该身份证已认证其他账号"

---

#### 1.4 账号安全 (`AccountSecurity.jsx`)
**页面职责**：修改密码、管理绑定、查看登录记录。

**核心功能点**：
- **安全等级仪表盘**：红/橙/绿三色进度条
- **修改密码**：验证旧密码->设置新密码(强度校验)
- **设备管理(Mock)**：列表展示登录IP/时间/设备名

---

#### 1.5 资料编辑 (`ProfileEdit.jsx`)
**页面职责**：修改头像、昵称、个性签名。

| 元素 | 交互细节 |
|---|---|
| 头像 | 点击调用相册；裁剪正方形；上传后替换旧头像 |
| 昵称 | 最多20字；禁止敏感词；失焦自动保存 |
| 个性签名 | 最多100字 |

---

#### 1.6 收货地址管理 (`AddressManagement.jsx`)
**页面职责**：新增/编辑/删除/设为默认收货地址。

**用户操作全流程**：

| 步骤 | 用户操作 | 系统响应 |
|---|---|---|
| 1.新增地址 | 点击"+"按钮 | 进入编辑页 |
| 2.智能粘贴 | 粘贴整段文本 | 自动识别姓名/电话/省市区/详细地址 |
| 3.省市区选择 | 点击省市区输入框 | 底部弹出三级联动滚轮 |
| 4.设为默认 | 勾选开关 | 互斥取消原默认地址 |
| 5.保存 | 点击「保存」 | 返回列表，新地址在顶部高亮闪烁一下 |

---

#### 1.7 支付设置 (`PaymentSettings.jsx`)
**页面职责**：管理支付宝/微信/银行卡绑定。

| 操作 | 响应 |
|---|---|
| 添加支付方式 | 跳转对应APP授权绑定 |
| 删除 | 侧滑显示删除按钮；二次确认弹窗 |
| 设为默认 | 互斥逻辑 |

---

### 模块 2：商品浏览

#### 2.1 首页/商城 (`UserShop.jsx`)
**页面职责**：流量入口双Tab(现货市集/开团广场)，搜索筛选。

**用户操作全流程**：

| 区域 | 用户操作 | 系统响应 |
|---|---|---|
| Tab切换 | 点击「开团广场」 | 内容区左滑切换；筛选栏变为"进度/截团时间" |
| 搜索框 | 输入关键词+回车 | 列表过滤；顶部显示"搜索结果: XX" |
| 快捷标签 | 点击"🔥热门" | 自动填入搜索词并执行 |
| 下拉刷新 | 下拉 | 显示品牌Logo Loading动画；刷新后Toast"推荐了N个新活动" |
| 商品卡片 | 点击 | 跳转ProductDetail |

---

#### 2.2 商品详情 (`ProductDetail.jsx`)
**页面职责**：展示商品、SKU选择、阶梯进度、发起购买。

**用户操作全流程**：

| 步骤 | 用户操作 | 系统响应 |
|---|---|---|
| 1.浏览 | 上滑页面 | 顶部导航栏由透明渐变为白色；标题淡入 |
| 2.点击购买 | 点击底部CTA | 底部弹出SKU面板(Spring弹簧动画) |
| 3.选择尺寸 | 点击「3分」 | 高亮选中；动态过滤：若「3分+烧肌」无货，「烧肌」置灰 |
| 4.选择肤色 | 点击「白肌」 | 顶部缩略图切换为对应SKU图；价格更新为固定值 |
| 5.确认 | 点击「支付 ¥X」 | 跳转确认订单页 |
| 6.阶梯进度(团购) | 点击进度条 | 弹出浮层显示里程碑奖励详情 |

**异常规则**：
- 未选全规格点击购买：页面震动，未选区块红色闪烁，Toast"请选择尺寸"

---

#### 2.3 团长主页 (`LeaderProfile.jsx`)
**页面职责**：展示团长个人信息、信用、进行中/历史团购。

| 区域 | 内容 |
|---|---|
| 头像区 | 头像+昵称+认证标；信用分(如"信用极好 95分")；粉丝数 |
| 进行中团购 | 卡片列表；点击跳转GroupBuyDetail |
| 关注按钮 | 点击切换"已关注"/"+关注" |

---

#### 2.4 商家主页 (`MerchantProfile.jsx`)
**页面职责**：展示店铺信息、现货商品列表。

| 区域 | 内容 |
|---|---|
| 店招 | 封面图+头像+店铺名+评分+所在地 |
| 搜索框 | 店内商品搜索 |
| 商品列表 | 网格展示；点击跳转ProductDetail |

---

### 模块 3：订单履约

#### 3.1 签署合同 (`ContractSigning.jsx`)
**页面职责**：支付定金前强制签署电子购买协议。

**用户操作全流程**：

| 步骤 | 用户操作 | 系统响应 |
|---|---|---|
| 1.阅读合同 | 滑动到底部 | 滚动进度条；底部勾选框变为可点 |
| 2.勾选同意 | 点击复选框 | 「前往签名」按钮高亮 |
| 3.手写签名 | 进入签名板手写 | Canvas画布记录笔迹 |
| 4.确认签名 | 点击「确认使用」 | 签名图合成到协议落款处 |
| 5.提交 | 点击「签署并支付」 | 记录时间戳IP->跳转支付 |

---

#### 3.2 订单详情 (`OrderDetail.jsx`)
**页面职责**：查看订单状态、支付定金/尾款、生成转单码、查看物流。

**核心状态流转**：
```
待付定金 -> 待审核 -> 制作中 -> 待付尾款 -> 待发货 -> 已发货 -> 已完成
```

| 状态 | 显示内容 | 可用操作 |
|---|---|---|
| 待付定金 | 倒计时15分钟 | 「支付定金」按钮 |
| 制作中 | TrustTimeline进度条 | 「生成转单码」按钮 |
| 已发货 | 物流轨迹 | 「确认收货」按钮 |

---

#### 3.3 我的参团 (`MyGroupBuys.jsx`)
**页面职责**：用户所有订单列表，按状态Tab筛选。

| Tab | 筛选条件 |
|---|---|
| 全部 | 所有订单 |
| 进行中 | 待付款/待审核/制作中/待补款/待发货 |
| 已完成 | 已发货/已完成 |

---

#### 3.4 我的合同 (`MyContracts.jsx`)
**页面职责**：查看所有已签署的电子合同PDF。

| 操作 | 响应 |
|---|---|
| 点击合同卡片 | 预览PDF全文 |
| 点击下载 | 保存PDF到本地 |

---

### 模块 4：转单系统

#### 4.1 转单落地页 (`TransferLanding.jsx`)
**页面职责**：买家输入转单码接收订单。

**用户操作全流程**：

| 步骤 | 用户操作 | 系统响应 |
|---|---|---|
| 1.输入码 | 输入8位大写字母数字 | 实时转大写格式化 |
| 2.查询 | 点击「确认」 | 查询订单信息；展示商品摘要+转让价格 |
| 3.接单 | 点击「立即接单」 | 进入支付流程(同普通下单) |
| 4.支付成功 | - | 原子交易完成；订单出现在买家列表；地址置空 |

**异常规则**：
- 码已使用：Toast"该转单码已失效"
- 码过期：Toast"转单码已过期"

---

### 模块 5：团长/商家工作台

#### 5.1 发起团购 (`CreateGroupBuy.jsx`)
**页面职责**：团长创建新团购，支持Excel批量导入SKU。

| 字段 | 校验规则 |
|---|---|
| 标题 | 必填，3-50字 |
| 全款 | 必填，≥1元 |
| 定金 | 必填，≤全款50% |
| 截团时间 | 必填，>当前时间 |
| 规格 | ≥1条 |

**Excel导入交互**：
1. 点击上传区域 -> 选择.xlsx文件
2. 前端解析表头(自动匹配"名称/规格名称", "价格/单价")
3. 解析成功：显示"导入N条规格"；若有异常行红色高亮
4. 点击发布 -> 二次确认弹窗 -> 跳转团购详情

---

#### 5.2 团购列表 (`GroupBuyManagement.jsx`)
**页面职责**：团长查看所有团购，快速入口。

| 卡片内容 | 操作 |
|---|---|
| 封面+标题+状态+进度 | 点击进入详情 |
| 订单数/营收 | - |

---

#### 5.3 团购详情管理 (`GroupBuyDetail.jsx`)
**页面职责**：团长管理单个团购的数据看板和进度控制。

| 区块 | 功能 |
|---|---|
| 数据看板 | 总订单数/总营收/待审核/待补款 |
| 进度时间线 | 可视化6阶段(原型/翻模/灌注/打磨/上妆/发货) |
| 进度控制按钮 | 「截团并制作」「更新进度」「完工(触发尾款)」「全部完成」 |

**触发尾款通知**：
点击「完工」-> 进度100% -> 所有订单状态变"待补款" -> 系统推送补款通知

---

#### 5.4 订单管理台 (`OrderManagement.jsx`)
**页面职责**：团长审核定金、查看订单统计、导出Excel。

| 功能 | 操作 |
|---|---|
| 审核定金 | 勾选订单->「确认收款」->状态变制作中 |
| 批量选择 | 长按进入批量模式 |
| 导出 | 点击导出按钮->下载.xlsx |

---

#### 5.5 发货管理 (`ShippingManagement.jsx`)
**页面职责**：团长发货操作，输入运单号。

| Tab | 内容 |
|---|---|
| 待发货 | 列表展示收件人信息+「立即发货」按钮 |
| 已发货 | 历史发货记录 |

**发货交互**：
点击「立即发货」-> 弹窗输入运单号 -> 确认 -> 订单状态变"已发货" -> 自动通知买家

---

#### 5.6 发布现货 (`CreateSpotProduct.jsx`)
**页面职责**：商家发布现货商品。

| 字段 | 说明 |
|---|---|
| 标题 | 必填 |
| 主图 | 1张封面 |
| 详情图 | 最多9张，支持拖拽排序 |
| SKU | 手动添加规格(名称+价格+库存) |

---

#### 5.7 现货管理 (`SpotProductManagement.jsx`)
**页面职责**：商家管理已发布的现货商品。

| 操作 | 响应 |
|---|---|
| 编辑 | 跳转CreateSpotProduct(编辑模式) |
| 上架/下架 | 切换销售状态 |
| 调整库存 | 弹窗输入新库存 |

---

## 二、P1 增长业务 (Growth)

---

### 模块 6：社交广场

#### 6.1 发布动态 (`CreatePost.jsx`)
**页面职责**：用户发布图文/视频动态。

| 元素 | 交互 |
|---|---|
| 图片 | 九宫格多选，长按拖拽排序 |
| 文本框 | 支持Emoji，最多500字 |
| 标签 | 输入#话题# |
| 关联商品 | 搜索并选择商品，底部显示卡片 |
| 发布 | 乐观更新(立即跳回广场插入新动态) |

---

#### 6.2 动态详情 (`PostDetail.jsx`)
**页面职责**：查看单条动态、评论互动。

| 功能 | 交互 |
|---|---|
| 点赞 | 点击爱心变红+数字+1；防抖0.5s提交 |
| 评论 | 底部输入框悬浮；发送后立即追加到列表 |
| 分享 | 生成卡片/调用系统分享 |

---

#### 6.3 用户主页 (`PublicUserProfile.jsx`)
**页面职责**：查看他人公开信息。

| 区块 | 内容 |
|---|---|
| 顶部 | 头像+昵称+签名+关注/粉丝数 |
| Tab | 动态 / 喜欢 |
| 操作 | 关注按钮、私信按钮 |

---

#### 6.4 我的关注 (`MyFollowing.jsx`)
**页面职责**：查看关注的团长/店铺/用户。

| Tab | 列表内容 |
|---|---|
| 团长/店铺 | 头像+名称+粉丝数 |
| 用户 | 头像+昵称 |

---

#### 6.5 我的喜欢 (`MyLikes.jsx`)
**页面职责**：查看收藏的商品和动态。

| Tab | 列表内容 |
|---|---|
| 商品 | 商品卡片 |
| 动态 | 动态缩略图 |

---

#### 6.6 我的相册 (`MyAlbum.jsx`)
**页面职责**：管理用户上传的图片/视频。

| 交互 | 响应 |
|---|---|
| 点击图片 | 全屏预览 |
| 点击视频 | 播放 |

---

### 模块 7：消息通知

(集成在App.jsx Messages Tab，本文档略)

---

## 三、P2 体验业务 (Experience)

---

### 模块 8：娃娃档案

#### 8.1 我的娃娃列表 (`MyDolls.jsx`)
**页面职责**：展示用户拥有的所有娃娃卡片。

| 卡片内容 | 交互 |
|---|---|
| 封面+名字+尺寸+已养天数 | 点击进入DollProfile |
| 添加按钮 | 跳转AddDoll页面 |

---

#### 8.2 娃娃档案 (`DollProfile.jsx`)
**页面职责**：娃娃的数字身份证+保养记录。

| 区块 | 内容 |
|---|---|
| 基础信息 | 名字/品牌/尺寸/肤色/生日 |
| 统计 | 照片数/衣服数/保养记录数 |
| 关联订单 | 跳转OrderDetail |
| 电子身份证 | 点击分享->生成精美证书图片 |

---

### 模块 9：许愿池

#### 9.1 许愿池 (`WishPool.jsx`)
**页面职责**：用户发布心愿(希望再贩的商品)，投票助燃，团长响应。

| 功能 | 交互 |
|---|---|
| 发布心愿 | 弹窗输入商品名称+描述 |
| 投票 | 点击爱心+1票；每日限1票 |
| 助燃(Boost) | 消耗金币，热度+N |
| 团长响应 | 团长点击「我有资源」->心愿状态变"洽谈中" |
| 分享 | 生成拉票卡片 |

---

### 模块 10：游戏化

#### 10.1 成就中心 (`AchievementCenter.jsx`)
**页面职责**：展示用户解锁的成就徽章。

| 元素 | 说明 |
|---|---|
| 总进度 | "2/8已解锁 25%" |
| 分类Tab | 全部/新手/购物/社交 |
| 成就卡片 | 图标+名称+描述+解锁状态；稀有度(普通/稀有/史诗) |

**解锁动画**：达成成就->全屏Lottie动画(烟花/钻石)->Toast"恭喜获得XXX"

---

### 模块 11：知识库

#### 11.1 知识库 (`KnowledgeBase.jsx`)
**页面职责**：BJD百科、新手指南、避坑教程。

| 区块 | 内容 |
|---|---|
| 搜索框 | 全文搜索 |
| 分类导航 | 新手指南/品牌大全/术语解释/避坑指南/保养教程 |
| 热门文章 | 阅读量Top N |
| 文章卡片 | 封面+标题+简介+阅读量 |

---

#### 11.2 肤色比对室 (`SkinMatchStudio.jsx`)
**页面职责**：可视化比对不同品牌肤色。

| 交互 | 响应 |
|---|---|
| 左滚轮 | 选择品牌A+肤色 |
| 右滚轮 | 选择品牌B+肤色 |
| 中间区域 | 实时渲染两半圆拼合效果 |
| 评分仪表盘 | 0-100分；标签(完美匹配/轻微色差/明显色差) |

---

## 四、全局异常兜底策略

| 异常场景 | 系统表现 |
|---|---|
| 网络断开 | 列表页显示缺省页插画+刷新按钮；提交操作Toast"网络异常" |
| 高并发超卖 | 支付时库存Check不足->弹窗"商品已售罄"->刷新页面 |
| 未登录访问 | 记录当前路径->跳转登录->登录后自动跳回 |
| 支付中断 | 订单保持"待支付"状态，显示「去支付」按钮+倒计时 |

---

## 五、角色权限矩阵

| 功能 | 买家 | 团长 | 商家 |
|---|:---:|:---:|:---:|
| 浏览商品 | ✓ | ✓ | ✓ |
| 参与团购 | ✓ | ✓ | ✗ |
| 发起团购 | ✗ | ✓ | ✗ |
| 发布现货 | ✗ | ✗ | ✓ |
| 审核订单/发货 | ✗ | ✓ | ✓ |
| 发布动态 | ✓ | ✓ | ✓ |
| 实名认证 | 可选 | **必须** | **必须** |

---

（文档结束）
