# BJD 团购社区平台 (GOMaster) - 产品需求文档 (PRD)

| 文档版本 | 修改日期 | 修改人 | 修改内容 | 状态 |
| :--- | :--- | :--- | :--- | :--- |
| v2.2.1 | 2026-01-05 | Antigravity | 修正交互细节，对齐实际代码实现 | **生效中** |

## 1. 产品概述

### 1.1 背景与目标
打造一个垂直于BJD（球关节娃娃）领域的综合性社区+电商平台。解决圈内"定金制"交易信任问题，提供从"种草"到"交易"再到"转单"的全链路服务。

### 1.2 用户角色
| 角色 | 代码标识 | 权限描述 |
| :--- | :--- | :--- |
| **普通用户 (Buyer)** | `USER` | 浏览内容、发布动态/二手、参与团购、购买现货。 |
| **团长 (Leader)** | `LEADER` | 拥有普通用户权限 + 发起团购、管理团购进度、发货。 |
| **商家 (Merchant)** | `MERCHANT` | 拥有普通用户权限 + 发布现货、店铺管理。 |

---

## 2. 全局交互规范

### 2.1 异常处理
- **网络异常**：API请求失败时Toast提示异常。
- **Loading态**：
    - **页面级**：部分页面使用骨架屏。
    - **下拉刷新**：顶部展示品牌Logo旋转动画（如首页及广场）。
- **空状态**：列表无数据时展示缺省文案（如"商品不存在或已下架"）。

### 2.2 数据格式
- **金额**：统一保留2位小数，带`¥`符号。
- **时间**：
    - 列表页：相对时间（如"刚刚", "2小时前"）。
    - 详情页：YYYY-MM-DD 标准格式。

---

## 3. 功能模块详解

### 3.1 认证与安全 (Auth & Security)

#### 3.1.1 手机号注册/登录
- **页面**：`Login.jsx`
- **视觉**：全屏背景图 + 毛玻璃(Glassmorphism)卡片。
- **交互流程**：
    1.  用户输入手机号。
    2.  点击"获取验证码"（当前版本为模拟发送，无实际倒计时持久化）。
    3.  输入验证码后自动登录。
- **协议勾选**：必须勾选用户协议方可登录，否则Alert提示。

#### 3.1.2 实名认证
- **页面**：`RealNameVerification.jsx`
- **流程**：拍照/上传身份证正反面 -> OCR识别回填 -> 提交审核。

---

### 3.2 社交广场 (Social Square)

#### 3.2.1 广场首页
- **页面**：`Square.jsx`
- **核心功能**：
    - **热门话题**：顶部横向滚动Tag列表（如"#BJD私养图"），点击跳转发布。
    - **快速发布**：顶部常驻入口 "今天有什么新鲜事分享？"。
    - **FAB**：右下角悬浮 "+" 按钮。
- **内容卡片类型**：
    - **普通动态**：单图/多图 + 文本。
    - **PK投票 (`PKCard`)**：左右两图对比，点击即投票，实时更新进度条。
    - **对比图 (`AfterBeforeSlider`)**：支持拖拽滑块查看妆前妆后效果。
    - **同款连接**：显示 "我也养 [型号]！晒同款" 按钮，点击带Tag发布。

#### 3.2.2 发布动态
- **页面**：`CreatePost.jsx`
- **模式切换**：
    - **普通**：图文发布。
    - **大PK**：必传左图/右图 + 左右标签。
    - **对比**：必传Before/After图。
- **关联商品**：支持搜索并添加商品卡片（Mock数据）。

#### 3.2.3 内容管理
- **页面**：`MyPosts.jsx`
- **功能**：
    - **已发布**：查看作品列表及互动数据（浏览/点赞/评论）。
    - **草稿箱**：查看未发布内容（当前显示为空状态Mock）。
    - **删除**：支持删除已发布动态。

---

### 3.3 二手交易与置换 (Second Hand & Barter)

#### 3.3.1 现货/闲置详情
- **页面**：`ProductDetail.jsx`
- **类型区分**：
    - **二手 (`secondhand`)**：展示成色标签（如"99新"）、原价对比、卖家信用。
    - **置换 (`barter`)**：展示"求换"物品及TAG，底部按钮为"发起交换"。
- **发起交换交互**：
    - 点击"发起交换" -> 底部弹出Modal。
    - 选择"我的物品"（从`MY_ITEMS`列表单选）。
    - 填写留言 -> 提交请求。

#### 3.3.2 闲置管理
- **页面**：`MyListings.jsx`
- **列表**：
    - **On Sale (出售中)**：展示在售商品，支持"标记已出"（模拟）、"删除"。
    - **Sold (已出售/下架)**：历史记录。

---

### 3.4 团购核心 (Group Buy)

#### 3.4.1 团购商品详情 (Buyer View)
- **页面**：`ProductDetail.jsx` (Type=GroupBuy)
- **交互**：
    - **SKU选择**：点击规格Tag（如"白肌"），高亮选中。
    - **购买限制**：未选规格时"支付定金"按钮Disabled。
    - **下单**：跳转 `ContractSigning` 签署合同。

#### 3.4.2 团购管理 (Leader View)
- **页面**：`GroupBuyDetail.jsx`
- **数据看板**：总订单、总营收、待审核定金、待补尾款。
- **进度控制**：
    - **可视化时间轴 (`TrustTimeline`)**：展示原型/翻模/灌注等6个阶段。
    - **操作按钮**：团长可点击"更新进度"或"完工"来推进状态。
- **规格统计**：展示各SKU的销量分布。

#### 3.4.3 订单履约
- **页面**：`OrderDetail.jsx`
- **状态流转**：支持从"待付定金"到"已完成"的完整模拟流程。
- **关键操作**：
    - 支付定金 -> 模拟支付成功。
    - 查看物流 -> 模拟物流轨迹。
    - 确认收货 -> 订单完成。

---

## 4. 附录：数据模型 (Schema)

### 4.1 Post (动态)
```json
{
  "id": "Number",
  "type": "normal | pk | compare",
  "user": "String (Nickname)",
  "avatar": "URL",
  "content": "String",
  "images": ["URL"], // normal
  "leftImage": "URL", "rightImage": "URL", // pk
  "beforeImage": "URL", "afterImage": "URL", // compare
  "likes": "Number",
  "isLiked": "Boolean",
  "tags": ["String"],
  "dollModel": "String (Optional)"
}
```

### 4.2 Product (商品)
```json
{
  "id": "Number",
  "type": "groupbuy | spot | secondhand | barter",
  "title": "String",
  "price": "Number | String",
  "deposit": "Number (GroupBuy Only)",
  "skus": [{ "id": 1, "name": "String" }],
  "seller": { "name": "String", "credit": "String" }, // SecondHand
  "want": "String", // Barter Only
  "condition": "String" // SecondHand
}
```

---

（文档结束）
