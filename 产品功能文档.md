# BJD 团购平台（拼团大师）产品功能文档

## 📋 文档信息
- **项目名称**：GOMaster / 拼团大师
- **版本号**：v1.0.0
- **最后更新**：2024-12-08
- **文档类型**：产品需求规格说明书（PRD）

---

## 一、项目概述

### 1.1 产品定位
拼团大师是一个专注于BJD（球形关节人偶）领域的团购社交平台，解决BJD玩家在团购过程中的信任问题、订单管理难题以及转单痛点。

### 1.2 核心用户
- **普通用户（买家）**：BJD爱好者，希望以优惠价格购买娃娃及周边
- **团长（组织者）**：经验丰富的BJD玩家，组织团购赚取差价
- **商家（卖家）**：娃社、手作店铺，销售现货商品

### 1.3 核心价值
- 🛡️ **信任体系**：实名认证、电子合同、信用评分
- 📊 **高效管理**：Excel导入订单、自动化进度通知、一键导出发货单
- 🔄 **转单创新**：无需团长干预，用户间直接转让订单
- 💬 **社群生态**：晒图广场、私养相册、团长评价

---

## 二、功能模块详细说明

### 模块 1：用户认证与账号管理

#### 1.1 登录注册
**页面**：`Login.jsx`

**功能描述**：
- 支持验证码登录（手机号）
- 支持密码登录
- 支持第三方登录（微信、QQ）
- 首次登录自动注册并绑定手机号

**交互流程**：
```
用户输入手机号 → 选择登录方式 → 验证码/密码登录 → 勾选协议 → 登录成功 → 跳转首页
```

**业务规则**：
- 验证码60秒内不可重复获取
- 密码需≥6位
- 必须同意《用户服务协议》和《隐私政策》

---

#### 1.2 忘记密码
**页面**：`ForgotPassword.jsx`

**功能描述**：
- 手机号验证码重置密码
- 新密码强度校验

**交互流程**：
```
输入手机号 → 获取验证码 → 输入新密码 → 确认密码 → 重置成功 → 返回登录
```

---

#### 1.3 个人资料编辑
**页面**：`ProfileEdit.jsx`

**功能描述**：
- 修改头像（本地上传）
- 编辑用户名、昵称、个性签名
- 绑定/修改手机号、邮箱
- 编辑收货地址

**数据字段**：
```
- 头像 (avatar) - 图片URL
- 用户名 (name) - 必填，3-20字符
- 昵称 (nickname) - 可选
- 个性签名 (bio) - 可选，最多100字
- 手机号 (phone) - 必填
- 邮箱 (email) - 可选
```

---

#### 1.4 账号安全
**页面**：`AccountSecurity.jsx`

**功能描述**：
- 修改登录密码
- 绑定/更换手机号
- 绑定/更换邮箱
- 登录设备管理
- 安全等级评估

**安全等级规则**：
- 低（红）：仅密码登录
- 中（橙）：密码 + 手机号
- 高（绿）：密码 + 手机号 + 邮箱 + 实名认证

---

#### 1.5 实名认证
**页面**：`RealNameVerification.jsx`

**功能描述**：
- 上传身份证正反面照片
- 填写真实姓名、身份证号
- 提交审核（1-3个工作日）

**认证作用**：
- 团长必须实名认证才可开团
- 实名用户信用评分更高
- 享受平台保障服务

---

#### 1.6 支付设置
**页面**：`PaymentSettings.jsx`

**功能描述**：
- 绑定支付宝
- 绑定微信支付
- 绑定银行卡
- 设置默认支付方式
- 管理支付密码

---

#### 1.7 收货地址管理
**页面**：`AddressManagement.jsx`

**功能描述**：
- 新增收货地址
- 编辑已有地址
- 删除地址
- 设置默认地址

**数据字段**：
```
- 收件人 (name)
- 手机号 (phone)
- 地址 (address) - 省市区 + 详细地址
- 是否默认 (isDefault)
```

---

### 模块 2：商品浏览与团购

#### 2.1 首页 - 双Tab模式
**页面**：`App.jsx - UserShop`

**功能描述**：

**Tab 1：现货市集**
- 商家发布的现货商品
- 按品牌风格分类（日韩系、国产系）
- 按尺寸筛选（叔、三分、四分、六分...）
- 按类型筛选（整娃、素体、娃衣、假发、眼珠...）

**Tab 2：开团广场**
- 团长发布的团购活动
- 图文卡片展示
- 显示团购进度、截团时间
- 互动数据（点赞、评论）

**交互设计**：
```
顶部双Tab切换 + 搜索按钮
↓
[现货市集] 品牌筛选栏 + 尺寸/类型筛选栏 + 商品网格
[开团广场] 团购卡片流 + 快速参团按钮
```

---

#### 2.2 商品详情
**页面**：`ProductDetail.jsx`

**功能描述**：
- 商品大图轮播
- 价格信息（全款、定金）
- 团长/商家信息卡片
- SKU规格选择（肤色、尺寸等）
- 商品描述
- 信任标签（实名认证、工期保障、售后无忧）

**交互流程**：
```
选择规格 → 点击"支付定金"按钮 → 跳转合同签署页 → 支付定金 → 订单生成
```

---

#### 2.3 团长主页
**页面**：`LeaderProfile.jsx`

**功能描述**：
- 团长头像、昵称、认证标识
- 粉丝数、开团数、信用评分
- 个人简介
- 进行中的团购列表
- 历史团购
- 用户评价

**交互**：
- 点击"关注"按钮
- 查看团购详情
- 跳转商品详情页

---

#### 2.4 商家主页
**页面**：`MerchantProfile.jsx`

**功能描述**：
- 店铺封面、头像
- 金牌商家标识
- 店铺评分、销量、所在地
- 店内商品搜索
- 商品网格展示

**交互**：
- 收藏店铺
- 搜索店内商品
- 进入商品详情

---

### 模块 3：订单管理（用户端）

#### 3.1 订单详情
**页面**：`OrderDetail.jsx`

**功能描述**：

**订单状态展示**：
- 待付定金
- 待审核（已付定金）
- 制作中
- 待付尾款（制作完成）
- 待发货（已付尾款）
- 已发货
- 已完成

**时间线组件**：
```
[●-----○-----○-----○-----○]
付定金  审核  制作  付尾款  发货
```

**核心功能**：
- 查看商品信息和SKU
- 支付定金按钮
- 支付尾款按钮
- **一键转单**（生成转单码）
- 查看物流信息

---

#### 3.2 转单功能（核心创新）
**页面**：`OrderDetail.jsx` + `TransferLanding.jsx`

**业务流程**：
```
卖家（用户A）
↓
1. 在订单详情页点击"生成转单码"
↓
2. 系统生成唯一码：TRANS-o1-ABCDE
↓
3. 分享转单码给买家（用户B）
↓
买家（用户B）
↓
4. 打开平台，输入转单码
↓
5. 查看订单详情（商品、价格、进度）
↓
6. 支付定金金额（直接给用户A，非团长）
↓
7. 订单所有权转移：o1.userId: A → B
↓
8. 系统通知团长：订单#o1已转让，新收件人是用户B
```

**核心价值**：
- ✅ 用户A回血，无需损失定金
- ✅ 团长无需手动改Excel
- ✅ 自动更新收货地址
- ✅ 保障交易安全

---

#### 3.3 我的参团记录
**页面**：`MyGroupBuys.jsx`

**功能描述**：
- 全部订单列表
- 进行中订单
- 已完成订单
- 每个订单显示：商品图、标题、规格、状态、进度条

**筛选Tab**：
- 全部
- 进行中（待补款、制作中）
- 已完成（已发货、已完成）

---

#### 3.4 我的合同
**页面**：`MyContracts.jsx`

**功能描述**：
- 显示所有已签署的电子合同
- 合同编号：CT-{订单号}
- 合同状态：已签署
- 下载/查看合同PDF

**数据字段**：
```
- 合同编号 (contractId)
- 订单号 (orderId)
- 商品名称 (title)
- 签署时间 (signedAt)
- 合同状态 (status)
```

---

### 模块 4：团长工作台

#### 4.1 发起团购
**页面**：`CreateGroupBuy.jsx`

**功能描述**：

**基本信息**：
- 团购标题
- 全款价格
- 定金金额
- 截团时间
- 详细描述

**规格导入（Excel）**：
- 上传 `.xlsx` 或 `.xls` 文件
- 表头格式：`规格名称`, `价格`
- 自动解析并预览
- 示例：
```
| 规格名称 | 价格 |
|---------|------|
| 白肌    | 1500 |
| 普肌    | 1500 |
| 烧肌    | 1600 |
```

**提交**：
- 发布团购到"开团广场"
- 生成团购ID

---

#### 4.2 我的团购列表
**页面**：`GroupBuyManagement.jsx`

**功能描述**：
- 显示当前团长发布的所有团购
- 每个团购显示：
  - 商品图、标题、状态
  - 进度条（0-100%）
  - 订单数、总营收、待发货数
- 点击进入团购详情

**快捷操作**：
- "开团"按钮（跳转创建团购页）

---

#### 4.3 团购详情管理
**页面**：`GroupBuyDetail.jsx`

**功能描述**：

**统计数据**：
- 总订单数
- 总营收（已收定金 + 尾款）
- 待审核定金数
- 待补尾款数

**SKU统计**：
```
白肌: 5人
普肌: 8人
烧肌: 2人
```

**进度管理按钮**：
- "截团并制作 (30%)"
- "更新进度 (80%)"
- "完工/收尾款 (100%)" - 触发所有买家补款通知
- "全部完成"

**触发逻辑**：
```
点击"完工/收尾款"按钮
↓
1. 团购进度更新为100%
↓
2. 所有关联订单状态：制作中 → 待补款
↓
3. 系统发送微信服务通知/短信给所有买家
↓
4. 买家收到补款提醒
```

---

#### 4.4 订单管理台
**页面**：`OrderManagement.jsx`

**功能描述**：

**快速统计卡片**：
- 我的团购数
- 待发货订单数
- 待审核数
- 制作中数
- 总营收

**待办任务列表**：

**1. 待审核定金**：
- 显示所有"待审核"状态订单
- 买家信息、商品、已付定金
- "确认收款"按钮
- 点击后订单状态：待审核 → 制作中

**2. 待发货订单**：
- 显示所有"待发货"状态订单
- 买家信息、商品、收货地址
- "发货"按钮
- 点击后输入运单号，订单状态：待发货 → 已发货

**导出功能**：
- "导出"按钮
- 一键导出所有订单为Excel
- 包含字段：订单号、商品、规格、买家ID、状态、已付定金、已付尾款、下单时间

---

#### 4.5 发货管理
**页面**：`ShippingManagement.jsx`

**功能描述**：

**Tab切换**：
- 待发货（显示数量）
- 已发货

**待发货列表**：
- 订单号、商品、规格
- 收件人、手机号、收货地址
- "复制地址"按钮
- "立即发货"按钮

**发货操作**：
```
点击"立即发货" → 弹窗输入运单号 → 确认 → 订单状态更新 → 自动通知买家
```

**搜索功能**：
- 支持按订单号、收件人、手机号搜索

---

### 模块 5：社交广场

#### 5.1 广场首页
**页面**：`App.jsx - Square`

**功能描述**：
- 信息流展示用户发布的动态
- 搜索框（搜索动态内容）
- "+"按钮（发布动态）
- AI文案助手引导卡片

**动态卡片**：
- 用户头像、昵称、认证标识、标签（资深玩家、手作娘）
- 发布时间、距离
- 文字内容
- 图片（最多9张）
- 互动按钮：点赞、评论、分享
- 点击卡片进入动态详情

---

#### 5.2 发布动态
**页面**：`CreatePost.jsx`

**功能描述**：
- 文字输入框（最多500字）
- 上传图片（最多9张）
- 添加标签（如 #BJD #私养图 #三分娃）
- AI文案助手提示

**发布流程**：
```
输入内容 → 上传图片 → 添加标签 → 点击"发布" → 发布成功 → 返回广场
```

---

#### 5.3 动态详情
**页面**：`PostDetail.jsx`

**功能描述**：
- 完整显示动态内容
- 用户信息（点击跳转用户主页）
- 图片查看器
- 点赞/取消点赞
- 评论列表
- 评论输入框
- 分享按钮

**评论功能**：
- 实时发送评论
- 显示评论用户头像、昵称
- 评论时间
- 评论点赞
- 回复评论（@用户）

---

#### 5.4 用户主页
**页面**：`PublicUserProfile.jsx`

**功能描述**：
- 用户头像、昵称、个性签名
- 所在地
- 粉丝数、关注数、获赞数
- "关注"按钮、"私信"按钮
- Tab切换：动态、喜欢
- 动态列表

---

#### 5.5 我的关注
**页面**：`MyFollowing.jsx`

**功能描述**：

**Tab切换**：
- 团长/店铺
- 用户

**列表显示**：
- 头像、昵称、简介
- 粉丝数
- "已关注"按钮
- 点击头像跳转主页

---

#### 5.6 我的喜欢
**页面**：`MyLikes.jsx`

**功能描述**：

**Tab切换**：
- 商品
- 动态

**商品列表**：
- 商品图、标题、价格、状态
- 红心标识
- 点击跳转商品详情

**动态列表**：
- 动态缩略图、文字摘要
- 用户昵称
- 点赞数
- 点击跳转动态详情

---

#### 5.7 我的相册
**页面**：`MyAlbum.jsx`

**功能描述**：
- 网格展示用户上传的所有图片
- 支持图片、视频
- 视频显示播放图标
- 点击查看大图/播放视频

---

### 模块 6：合同与法务

#### 6.1 签署购买协议
**页面**：`ContractSigning.jsx`

**功能描述**：

**合同内容**：
```
BJD 团购定金协议

甲方（买家）：{userName}
乙方（团长）：{leaderName}

一、商品信息
买家自愿参与乙方发起的"{title}"团购活动，并支付定金。

二、定金约定
1. 定金金额为人民币 {deposit} 元。
2. 定金支付后不可退还，请买家谨慎下单。
3. 若因官方流团（未达到起团数量），定金将全额原路退回。

三、尾款及发货
1. 制作完成后，乙方将通知买家补款。
2. 买家需在通知发出后 30 天内补齐尾款，逾期视为跑单，定金不退。
3. 乙方承诺在收到尾款后 7 个工作日内发货。

四、售后条款
1. 本商品为定制类商品，不支持七天无理由退换。
2. 若出现严重质量问题（如断裂、错件），请在签收后 24 小时内联系团长处理。
```

**签署流程**：
```
阅读合同 → 勾选"我已阅读并同意" → 点击签名区域 → 自动生成签名 → 点击"签署并支付定金" → 跳转支付
```

**签署效果**：
- 显示用户名的手写签名样式
- 生成电子合同并存档
- 合同编号：CT-{订单号}

---

### 模块 7：消息与通知

#### 7.1 消息中心
**页面**：`App.jsx - Messages`

**功能描述**：

**Tab切换**：
- 聊天
- 通知（显示未读数）

**聊天列表**：
- 会话头像、名称
- 最后一条消息
- 时间
- 未读消息数

**通知列表**：
- 通知图标、标题、内容
- 时间
- 未读数

**通知类型筛选**：
- 评论和@
- 新增关注
- 收到的赞

**通知类型示例**：
- 新团开团通知
- 补款通知
- 参团成功通知
- 参团失败通知（流团）
- 发货通知
- 进度更新通知

---

### 模块 8：娃娃档案管理（P0 核心功能）

#### 8.1 我的娃娃列表
**页面**：`MyDolls.jsx`

**功能描述**：
- 展示用户拥有的所有娃娃卡片
- 快速查看：娃娃名称、照片、尺寸
- 支持搜索和筛选（按尺寸、品牌）
- "添加新娃娃"按钮

**卡片显示**：
```
┌─────────────┐
│  [娃娃照片]  │
│  小鹿        │
│  三分 | 白肌  │
│  已养182天   │
└─────────────┘
```

**交互**：
- 点击卡片 → 进入娃娃档案详情页
- 长按卡片 → 显示快捷菜单（编辑、删除、分享）

---

#### 8.2 娃娃档案详情
**页面**：`DollProfile.jsx`

**功能描述**：

**基本信息**：
- 娃娃名称、照片墙（最多9张）
- 品牌/娃社、尺寸、肤色
- 生日（开箱日期）
- 体重、身高

**关联数据**：
- 📜 **购买订单**：自动关联订单信息
- 📋 **电子合同**：一键查看购买合同
- 📦 **物流信息**：发货记录
- 🎨 **妆面记录**：原厂妆/后补妆
- 👗 **衣柜管理**：已购买的娃衣列表
- 📸 **专属相册**：该娃娃的所有照片
- 🛠️ **保养记录**：维修、清洁记录

**分享功能**：
- 生成精美的电子身份证图片
- 一键分享到社交平台
- 显示"已养XX天"

**数据字段**：
```javascript
{
  id: 'd1',
  userId: 'u1',
  name: '小鹿',
  brand: '自制特体',
  size: '1/3',
  skinColor: '白肌',
  birthday: '2023-10-15',
  weight: 200,
  height: 60,
  images: ['url1', 'url2'],
  orderId: 'o1',  // 关联订单
  makeup: '原厂妆',
  outfitCount: 12,
  photoCount: 89,
  maintenanceRecords: [],
  createTime: '2023-10-15'
}
```

---

#### 8.3 添加娃娃
**页面**：`AddDoll.jsx`

**功能描述**：
- 手动添加：填写娃娃信息
- 从订单导入：选择已完成的订单，自动填充信息
- 上传照片（最多9张）
- 设置封面照片

**表单字段**：
- 娃娃名称（必填）
- 品牌/娃社
- 尺寸（下拉选择）
- 肤色
- 生日（开箱日期）
- 备注

---

### 模块 9：交易保障体系（P0 核心功能）

#### 9.1 订金托管机制

**业务流程**：
```
用户支付定金
    ↓
定金托管在平台（不直接给团长）
    ↓
团购成功（截团后）→ 自动结算给团长
团购失败（流团）→ 72小时内自动退回买家
超期未截团 → 自动触发退款
```

**显示标识**：
```
[资金安全保障]
✓ 定金由平台托管
✓ 流团自动退款
✓ 全程可追溯
```

**技术实现**：
- 订单表增加字段：`depositStatus` (托管中/已结算/已退款)
- 定时任务：检测截团时间，自动结算或退款
- 退款接口：调用支付平台原路退回

---

#### 9.2 团长保证金制度
**页面**：`DepositManagement.jsx`（团长专用）

**功能描述**：

**保证金规则**：
- 首次开团需缴纳保证金：5000元
- 信用分≥90：可降低至3000元
- 信用分≥95：可降低至2000元
- 保证金生息，年化3%
- 团长可随时提取利息

**保证金用途**：
- 买家跑单赔付
- 质量问题赔付
- 延期赔付（超过承诺工期30天以上）

**显示效果**：
```
[我的保证金]
当前保证金：¥5,000
累计收益：¥150
可提取收益：¥150

保障范围：
✓ 跑单赔付（最高1000元/单）
✓ 质量问题全额退款
✓ 延期补偿

[提取收益] [追加保证金]
```

**团长主页显示**：
```
[金牌团长] ✓
已缴纳5000元保证金
信用评分：95分
累计开团：25次
```

---

#### 9.3 开箱视频验货
**页面**：`UnboxingVideo.jsx`

**触发时机**：
- 订单状态变为"已发货"后
- 买家点击"确认收货"时

**功能描述**：

**录制流程**：
```
收到包裹
    ↓
打开App → 订单详情
    ↓
点击"录制开箱视频"
    ↓
相机自动开启（前置+后置切换）
    ↓
录制30-120秒视频
    ↓
自动上传到订单（加密存储）
    ↓
确认收货 or 申请售后
```

**强制提醒**：
```
⚠️ 重要提醒
为保障您的权益，请在拆箱前录制开箱视频

[立即录制] [稍后提醒]

*如发现质量问题，视频将作为维权凭证
```

**视频要求**：
- 时长：30-120秒
- 清晰展示：外包装、内部填充物、娃娃本体
- 重点拍摄：关节、妆面、瑕疵部位
- 自动添加水印：订单号、时间戳

**售后流程**：
```
发现质量问题
    ↓
点击"申请售后" → 选择问题类型
    ↓
上传视频证据（已录制的自动关联）
    ↓
平台客服审核（24小时内）
    ↓
审核通过 → 团长保证金赔付
审核不通过 → 买家申诉
```

---

### 模块 10：团长工具增强（P0 核心功能）

#### 10.1 自动催款系统

**业务规则**：
```
制作完成 → 通知补款
    ↓
第3天：首次提醒（微信服务号 + 短信）
第7天：二次提醒（增加App推送）
第15天：三次提醒（电话客服）
第25天：最后警告（标记"跑单预警"）
第30天：确认跑单 → 加入黑名单
```

**催款模板**：
```
[尾款催付提醒]
亲爱的{用户名}：

您参与的团购【{团购名称}】已制作完成！
请在{deadline}前补齐尾款，以便及时发货。

订单信息：
- 订单号：{orderId}
- 尾款金额：¥{finalPayment}
- 剩余时间：{remainDays}天

[立即支付]

*超期未付将影响您的信用评分
```

**团长视角**：
```
[催款进度]
待补款：15人
已催款3天：8人
已催款7天：5人
已催款15天：2人 ⚠️
已催款25天：0人
```

---

#### 10.2 黑名单共享机制

**触发条件**：
- 超30天未补尾款
- 恶意退单（连续3次）
- 收货后恶意差评

**黑名单效果**：
```
[风险用户警告]
⚠️ 该用户有跑单记录
用户ID：u123
跑单次数：1次
涉及金额：¥500
最近跑单：2023-11-01

建议操作：
□ 拒绝接单
□ 要求先全款
□ 正常接单（风险自负）
```

**买家限制**：
- 无法参与任何团购
- 无法发布动态
- 无法转单
- 账户显示"信用受限"

**解除条件**：
- 补齐欠款
- 提交申诉（平台客服审核）
- 等待3个月自动解除（仅限首次）

---

#### 10.3 进度通知自动化
**页面**：`ProgressNotificationManager.jsx`

**功能描述**：

**通知模板库**：
```
预设模板：
1. 截团通知
2. 开始制作
3. 进度更新（可自定义百分比）
4. 延期通知
5. 完工通知
6. 发货通知

自定义模板：
- 支持富文本编辑
- 插入变量：{用户名}、{团购名称}、{进度}
- 添加图片/视频
```

**发送方式**：
- 立即发送
- 定时发送（选择日期时间）
- 条件触发（进度达到XX%时自动发送）

**效果预览**：
```
[通知预览]
━━━━━━━━━━━━━━━
📢 进度更新

亲们好！工厂反馈本周开始打磨啦~
预计下周就能完工！

当前进度：80% ████████░░

请大家耐心等待哦 💖
━━━━━━━━━━━━━━━

发送对象：本团所有参与者（25人）
发送时间：立即发送
[确认发送]
```

**发送记录**：
- 显示历史通知
- 查看送达率、阅读率
- 用户反馈（点赞、评论）

---

#### 10.4 智能定价助手
**页面**：`PricingAssistant.jsx`

**功能描述**：

**输入参数**：
- 成本价（必填）
- 工期（月）
- 品牌/娃社
- 尺寸（三分/四分...）
- 类型（整娃/素体/娃衣...）

**AI分析**：
```
[定价建议报告]

你的成本：¥800
市场分析：
- 同类商品均价：¥1,450
- 价格区间：¥1,200 - ¥1,800
- 热门价格：¥1,500（占比35%）

推荐定价：
━━━━━━━━━━━━━━━━━━
保守定价：¥1,200
预计利润：¥400/单
成团概率：92%

合理定价：¥1,500 ⭐ 推荐
预计利润：¥700/单
成团概率：78%

高端定价：¥1,800
预计利润：¥1,000/单
成团概率：45%
━━━━━━━━━━━━━━━━━━

[采用推荐定价]
```

**历史数据**：
- 显示该团长历史定价
- 成交率统计
- 利润分析

---

### 模块 11：游戏化激励系统（P1）

#### 11.1 成就中心
**页面**：`AchievementCenter.jsx`

**功能描述**：

**成就分类**：

**1. 新手成就**：
- 🎉 入坑徽章：完成首次参团
- 📝 实名玩家：完成实名认证
- 🏠 安全保障：绑定收货地址

**2. 购物成就**：
- 🛍️ 剁手王：参与5次团购
- 💎 壕无人性：累计消费10,000元
- 🔄 转单达人：成功转让3次订单

**3. 社交成就**：
- 📸 晒图达人：发布10条动态
- ❤️ 人气王：获得100个赞
- 💬 话痨：发表50条评论

**4. 团长成就**：
- 👑 金牌团长：开团10次
- 🎯 完美履约：0投诉记录
- 🌟 口碑爆棚：好评率95%+

**成就展示**：
```
┌──────────────────┐
│  [成就图标]       │
│  入坑徽章         │
│  ★★★☆☆ (3/5)  │
│  已解锁：2023-10-01│
│  获得人数：12,450  │
└──────────────────┘

奖励：
✓ 虚拟徽章（主页显示）
✓ 10元优惠券
✓ 信用分 +5
```

**成就墙**：
- 已解锁成就高亮显示
- 未解锁成就显示进度条
- 可分享到社交平台

---

#### 11.2 工期日历 & 倒计时
**集成到**：`OrderDetail.jsx`

**功能描述**：

**可视化日历**：
```
[工期进度日历]
━━━━━━━━━━━━━━━━━━━━━━━━━━
10月    11月    12月    1月    2月
━━━━━━━━━━━━━━━━━━━━━━━━━━
✓开团  ✓截团   ●制作   ○完工  ○发货
10/01  10/15   11/01   01/15  01/20
━━━━━━━━━━━━━━━━━━━━━━━━━━

当前阶段：制作中 (75%)
距离完工：45天
距离回家：50天 💖

[设置提醒]
```

**倒计时组件**：
```
┌─────────────────┐
│  ⏰ 距离回家      │
│  45天 12时 30分  │
│  ████████░░ 75% │
└─────────────────┘
```

**节点提醒**：
- 截团前3天：提醒尽快下单
- 制作进度更新：自动推送
- 完工提醒：准备补款
- 发货提醒：准备收货

---

### 模块 12：知识库与社区（P0）

#### 12.1 BJD知识库
**页面**：`KnowledgeBase.jsx`

**功能描述**：

**内容分类**：

**1. 新手指南**：
- BJD是什么？
- 如何选择第一只娃娃
- 尺寸对照表（叔/三分/四分...）
- 预算规划（1000/3000/5000+）

**2. 品牌大全**：
- 国产品牌：Ringdoll、DollZone、AS、GEM
- 日韩品牌：VOLKS、Fairyland、Luts
- 品牌对比：价格、质量、售后

**3. 术语解释**：
- 私养：用户自己拥有的娃娃
- 出生证：真品证明卡
- 工期：制作周期
- 素体/单头/整娃：商品类型
- 二样/三样：原型修改次数

**4. 避坑指南**：
- 如何识别假娃
- 警惕低价陷阱
- 团长选择技巧
- 付款安全须知

**5. 保养教程**：
- 关节松了怎么办
- 如何清洁娃娃
- 妆面保护方法
- 存放注意事项

**呈现形式**：
- 图文教程（Markdown）
- 视频教程（嵌入B站）
- 互动问答（社区UGC）
- 搜索功能

**UI设计**：
```
[知识库首页]
━━━━━━━━━━━━━━━━
🔍 搜索框

📚 热门教程
- 新手入坑指南 (12.5k阅读)
- 如何识别假娃 (8.3k阅读)

📖 分类浏览
[新手指南] [品牌大全] [术语解释]
[避坑指南] [保养教程]

💬 互动问答
- 三分和四分哪个更适合新手？
- 如何选择肤色？
━━━━━━━━━━━━━━━━
```

---

### 模块 13：每周活动（P2 增值功能）

#### 13.1 每周之星 / 娃娃选美
**页面**：`WeeklyContest.jsx`

**功能描述**：

**活动规则**：
- 每周一个主题（最美古风娃、最萌Q娃...）
- 用户上传参赛照片
- 投票周期：周一至周日
- 每人每天可投3票

**参赛流程**：
```
进入活动页
    ↓
点击"我要参赛"
    ↓
选择娃娃（从档案中）
    ↓
上传参赛照片（1-3张）
    ↓
填写作品说明
    ↓
提交审核（1小时内）
    ↓
审核通过 → 展示在活动页
```

**排行榜**：
```
[本周榜单]
━━━━━━━━━━━━━━━━
🥇 1. 小鹿 (1,250票)
   by @养娃大户
   [查看作品]

🥈 2. 小兔 (1,100票)
   by @手作娘小B

🥉 3. 小猫 (950票)
   by @摄影师C

━━━━━━━━━━━━━━━━
[查看更多]
```

**奖励**：
- 🥇 第一名：500元现金 + 首页推荐位7天
- 🥈 第二名：300元现金 + 首页推荐位3天
- 🥉 第三名：100元现金 + 虚拟徽章

**商业价值**：
- 团长可赞助活动（品牌曝光）
- 增加用户活跃度
- 持续产出优质内容

---

## 三、角色权限矩阵

| 功能模块 | 普通用户 | 团长 | 商家 |
|---------|---------|------|------|
| 浏览商品/团购 | ✅ | ✅ | ✅ |
| 参与团购 | ✅ | ✅ | ❌ |
| 支付定金/尾款 | ✅ | ✅ | ❌ |
| 转单 | ✅ | ✅ | ❌ |
| 发起团购 | ❌ | ✅ | ❌ |
| 订单管理（审核/发货） | ❌ | ✅ | ✅ |
| 发布现货商品 | ❌ | ❌ | ✅ |
| 发布动态 | ✅ | ✅ | ✅ |
| 实名认证 | 可选 | **必须** | **必须** |
| 娃娃档案管理 | ✅ | ✅ | ❌ |
| 缴纳保证金 | ❌ | **必须** | ❌ |
| 开箱视频验货 | ✅ | ✅ | ❌ |
| 进度通知管理 | ❌ | ✅ | ❌ |
| 查看黑名单 | ❌ | ✅ | ❌ |
| 参与每周之星 | ✅ | ✅ | ✅ |

---

## 四、数据流与状态机

### 4.1 订单状态机

```
[待付定金] (UNPAID_DEPOSIT)
    ↓ 用户支付定金
[待审核] (WAIT_VERIFY)
    ↓ 团长确认收款
[制作中] (PRODUCTION)
    ↓ 工厂制作完成（团长触发）
[待付尾款] (WAIT_FINAL)
    ↓ 用户支付尾款
[待发货] (WAIT_SHIP)
    ↓ 团长发货
[已发货] (SHIPPED)
    ↓ 用户确认收货
[已完成] (COMPLETED)
```

**特殊状态**：
- [已转单] (TRANSFERRED) - 订单所有权已转移

---

### 4.2 团购进度状态

```
[征集中] - 0-50% - 收集定金阶段
[制作中] - 50-99% - 工厂生产阶段
[补款中] - 100% - 完工，等待买家补款
[发货中] - 100% - 陆续发货
[已结束] - 100% - 全部订单完成
```

---

## 五、关键业务规则

### 5.1 定金规则
- 定金一旦支付不可退款（除非流团）
- 流团条件：未达到起订量（由团长设定）
- 流团后定金全额原路退回

### 5.2 尾款规则
- 制作完成后30天内必须补款
- 超过30天未补款视为"跑单"
- 跑单用户：
  - 定金不退
  - 信用评分降低
  - 加入黑名单（无法参与其他团购）

### 5.3 转单规则
- 只有"制作中"状态的订单可转单
- 转单码有效期：7天
- 转单费用：新买家支付的金额 = 原定金金额
- 资金流向：新买家 → 原买家（非团长）
- 团长收到通知但无需手动操作

### 5.4 信用体系
**信用评分组成**：
- 是否实名认证：+10分
- 按时补款：+5分/次
- 跑单：-20分/次
- 收到好评：+2分/条

**信用等级**：
- 优秀（≥90分）：可享受先发货后补款
- 良好（60-89分）：正常
- 较差（30-59分）：需要先补款再发货
- 极差（<30分）：禁止参与团购

---

## 六、特色功能亮点

### 6.1 转单功能（Killer Feature）
**痛点**：
- 用户A参团后因各种原因想退出
- 传统方式：联系团长 → 团长改Excel → 找新买家 → 重新登记
- 团长工作量大，容易出错

**解决方案**：
- 一键生成转单码
- 新买家扫码/输入码即可接单
- 资金直接给原买家（回血）
- 订单自动转移所有权
- 团长零操作，仅收到通知

---

### 6.2 Excel导入订单
**痛点**：
- 团长在微信群手动统计订单
- 复制粘贴到Excel，容易出错
- 逐个通知买家支付定金

**解决方案**：
- 上传现有Excel订单表
- 系统自动解析并生成订单
- 自动发送短信邀请买家绑定订单
- 买家在平台完成后续流程

---

### 6.3 电子合同
**痛点**：
- 传统团购无合同，纠纷难处理
- 买家不信任团长

**解决方案**：
- 支付定金前强制签署电子合同
- 合同包含：商品信息、定金/尾款金额、售后条款
- 合同自动存档，可随时查看
- 提供法律保障

---

### 6.4 自动化通知
**痛点**：
- 团长需要手动在微信群通知进度
- 买家容易错过补款通知

**解决方案**：
- 制作完成：自动发送补款通知（微信服务号 + 短信）
- 进度更新：自动推送给所有参团用户
- 发货：自动发送物流信息
- 催款：第3天、第7天自动提醒

---

## 七、页面导航结构

```
登录/注册
    ↓
═══════════════════════════════════════
主 Tab 页面
═══════════════════════════════════════

[养娃] (普通用户)
    ├── 现货市集
    │   ├── 商品详情 → 签署合同 → 订单详情
    │   └── 商家主页
    └── 开团广场
        ├── 团购详情 → 签署合同 → 订单详情
        └── 团长主页

[工作台] (团长/商家)
    ├── 发起团购
    ├── 订单管理台
    │   ├── 团购详情管理
    │   └── 发货管理
    └── 我的团购列表

[广场]
    ├── 动态流
    ├── 发布动态
    ├── 动态详情
    └── 用户主页

[消息]
    ├── 聊天列表
    └── 通知列表

[我的]
    ├── 我的参团
    ├── 我的关注
    ├── 我的喜欢
    ├── 我的相册
    ├── 我的合同
    ├── 收货地址
    ├── 编辑资料
    ├── 实名认证
    ├── 支付设置
    └── 账号安全

═══════════════════════════════════════
独立页面
═══════════════════════════════════════
├── 接收转单 (扫码/输入转单码)
└── 忘记密码
```

---

## 八、非功能性需求

### 8.1 性能要求
- 页面加载时间 < 2秒
- 图片懒加载
- 接口响应时间 < 500ms
- 支持1000+并发用户

### 8.2 兼容性
- 移动端优先（375px - 428px）
- 支持iOS 13+、Android 8+
- 支持微信浏览器、Safari、Chrome

### 8.3 安全性
- 所有支付信息加密传输（HTTPS）
- 敏感信息脱敏显示（手机号、身份证号）
- 防刷单机制
- 实名认证审核

### 8.4 数据备份
- 订单数据每天备份
- 合同数据永久保存
- 用户数据定期备份

---

## 九、未来规划（Roadmap）

### Phase 2（v2.0）
- [ ] 在线支付对接（支付宝、微信支付）
- [ ] 物流自动查询
- [ ] 售后仲裁系统
- [ ] 团长保证金制度

### Phase 3（v3.0）
- [ ] 直播开箱功能
- [ ] AI虚拟试妆（给娃娃试妆）
- [ ] 娃娃社交匹配（匹配附近玩家）
- [ ] 二手交易市场

### Phase 4（v4.0）
- [ ] 国际化（支持日文、韩文）
- [ ] 跨境团购
- [ ] 虚拟娃社（AI生成娃娃设计）

---

## 十、附录

### 10.1 术语表
- **BJD**：Ball-Jointed Doll，球形关节人偶
- **团长**：团购组织者
- **娃社**：制作BJD的厂家/工作室
- **SKU**：Stock Keeping Unit，库存单位（如"白肌"、"烧肌"）
- **定金**：参团时支付的预付款
- **尾款**：制作完成后补齐的剩余款项
- **工期**：制作娃娃所需的时间（通常3-6个月）
- **私养**：用户自己拥有的娃娃
- **出生证**：娃娃的真品证明卡
- **流团**：因人数不足导致团购取消

### 10.2 参考资料
- 业务逻辑全景图：`业务逻辑全景图.md`
- 商业落地方案：`商业落地方案.md`
- 项目蓝图：`项目蓝图.md`

---

**文档结束**

