# BJD å›¢è´­å¹³å°æŠ€æœ¯æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
- **é¡¹ç›®åç§°**ï¼šGOMaster / æ‹¼å›¢å¤§å¸ˆ
- **ç‰ˆæœ¬å·**ï¼šv1.1.0
- **æœ€åæ›´æ–°**ï¼š2024-12-08
- **æ–‡æ¡£ç±»å‹**ï¼šæŠ€æœ¯è®¾è®¡æ–‡æ¡£ & APIæ¥å£è§„æ ¼è¯´æ˜
- **æœ¬æ¬¡æ›´æ–°**ï¼šæ–°å¢å¨ƒå¨ƒæ¡£æ¡ˆã€æˆå°±ç³»ç»Ÿã€çŸ¥è¯†åº“ç­‰7ä¸ªAPIæ¨¡å—ï¼Œ10ä¸ªæ•°æ®è¡¨

---

## ä¸€ã€æŠ€æœ¯æ¶æ„

### 1.1 æŠ€æœ¯æ ˆ

**å‰ç«¯**ï¼š
- **æ¡†æ¶**ï¼šReact 18.2.0
- **æ„å»ºå·¥å…·**ï¼šVite 4.4.5
- **æ ·å¼**ï¼šTailwind CSS 3.3.3
- **è·¯ç”±**ï¼šè‡ªå®šä¹‰ RouteStack è·¯ç”±ç®¡ç†
- **çŠ¶æ€ç®¡ç†**ï¼šReact Context API
- **å›¾æ ‡**ï¼šlucide-react 0.263.1
- **Excelå¤„ç†**ï¼šxlsx 0.18.5

**å¼€å‘å·¥å…·**ï¼š
- **åŒ…ç®¡ç†å™¨**ï¼šnpm
- **ä»£ç è§„èŒƒ**ï¼šESLint
- **æ ·å¼å¤„ç†**ï¼šPostCSS + Autoprefixer

### 1.2 é¡¹ç›®ç»“æ„

```
BJD/
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â””â”€â”€ UserSwitcher.jsx
â”‚   â”œâ”€â”€ context/          # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ AppContext.jsx
â”‚   â”œâ”€â”€ data/             # Mockæ•°æ®
â”‚   â”‚   â””â”€â”€ mock.js
â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶(30ä¸ª)
â”‚   â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”‚   â”œâ”€â”€ ForgotPassword.jsx
â”‚   â”‚   â”œâ”€â”€ ProductDetail.jsx
â”‚   â”‚   â”œâ”€â”€ CreateGroupBuy.jsx
â”‚   â”‚   â”œâ”€â”€ GroupBuyDetail.jsx
â”‚   â”‚   â”œâ”€â”€ GroupBuyManagement.jsx
â”‚   â”‚   â”œâ”€â”€ OrderDetail.jsx
â”‚   â”‚   â”œâ”€â”€ OrderManagement.jsx
â”‚   â”‚   â”œâ”€â”€ ShippingManagement.jsx
â”‚   â”‚   â”œâ”€â”€ MyGroupBuys.jsx
â”‚   â”‚   â”œâ”€â”€ TransferLanding.jsx
â”‚   â”‚   â”œâ”€â”€ ContractSigning.jsx
â”‚   â”‚   â”œâ”€â”€ MyContracts.jsx
â”‚   â”‚   â”œâ”€â”€ ProfileEdit.jsx
â”‚   â”‚   â”œâ”€â”€ AddressManagement.jsx
â”‚   â”‚   â”œâ”€â”€ AccountSecurity.jsx
â”‚   â”‚   â”œâ”€â”€ PaymentSettings.jsx
â”‚   â”‚   â”œâ”€â”€ RealNameVerification.jsx
â”‚   â”‚   â”œâ”€â”€ CreatePost.jsx
â”‚   â”‚   â”œâ”€â”€ PostDetail.jsx
â”‚   â”‚   â”œâ”€â”€ MyAlbum.jsx
â”‚   â”‚   â”œâ”€â”€ MyFollowing.jsx
â”‚   â”‚   â”œâ”€â”€ MyLikes.jsx
â”‚   â”‚   â”œâ”€â”€ LeaderProfile.jsx
â”‚   â”‚   â”œâ”€â”€ MerchantProfile.jsx
â”‚   â”‚   â”œâ”€â”€ PublicUserProfile.jsx
â”‚   â”‚   â”œâ”€â”€ MyDolls.jsx              # â­ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ DollProfile.jsx          # â­ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ AchievementCenter.jsx    # â­ æ–°å¢
â”‚   â”‚   â””â”€â”€ KnowledgeBase.jsx        # â­ æ–°å¢
â”‚   â”œâ”€â”€ router/           # è·¯ç”±ç®¡ç†
â”‚   â”‚   â””â”€â”€ RouteStack.jsx
â”‚   â”œâ”€â”€ App.jsx           # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ index.css         # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ main.jsx          # åº”ç”¨å…¥å£
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ vite.config.js
â””â”€â”€ postcss.config.js
```

---

## äºŒã€æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 2.1 è·¯ç”±ç®¡ç† (RouteStack)

**è®¾è®¡ç†å¿µ**ï¼šç±»ä¼¼åŸç”Ÿç§»åŠ¨åº”ç”¨çš„å¯¼èˆªæ ˆ

**æ ¸å¿ƒAPI**ï¼š
```javascript
// router/RouteStack.jsx
const { 
  push,      // å‹å…¥æ–°é¡µé¢
  pop,       // è¿”å›ä¸Šä¸€é¡µ
  replace,   // æ›¿æ¢å½“å‰é¡µé¢
  currentRoute // å½“å‰è·¯ç”±ä¿¡æ¯
} = useRouter();

// ä½¿ç”¨ç¤ºä¾‹
push('ProductDetail', { id: 101 });      // æºå¸¦å‚æ•°
pop();                                    // è¿”å›
replace('Login');                         // æ›¿æ¢ä¸ºç™»å½•é¡µ
```

---

### 2.2 å…¨å±€çŠ¶æ€ç®¡ç† (AppContext)

**æ–‡ä»¶**ï¼š`src/context/AppContext.jsx`

**çŠ¶æ€ç»“æ„**ï¼š
```javascript
{
  currentUser: User,           // å½“å‰ç™»å½•ç”¨æˆ·
  orders: Order[],             // è®¢å•åˆ—è¡¨
  groupBuys: GroupBuy[],       // å›¢è´­åˆ—è¡¨
  notifications: Notification[] // é€šçŸ¥åˆ—è¡¨
}
```

**æ ¸å¿ƒæ–¹æ³•**ï¼š
```javascript
const {
  // ç”¨æˆ·ç›¸å…³
  currentUser,
  login(userId),
  
  // è®¢å•ç›¸å…³
  orders,
  createOrder(groupBuyId, skuId),
  payDeposit(orderId),
  payFinal(orderId),
  
  // å›¢é•¿æ“ä½œ
  verifyOrder(orderId),
  shipOrder(orderId),
  updateProgress(groupBuyId, progress, status),
  createGroupBuy(data),
  
  // è½¬å•ç›¸å…³
  generateTransferCode(orderId),
  claimTransfer(code),
  
  // å›¢è´­ç›¸å…³
  groupBuys
} = useApp();
```

---

## ä¸‰ã€APIæ¥å£è®¾è®¡

### 3.1 æ¥å£è§„èŒƒ

**Base URL**ï¼š`https://api.bjdmaster.com/v1`

**é€šç”¨è¯·æ±‚å¤´**ï¼š
```http
Content-Type: application/json
Authorization: Bearer <token>
X-Device-Type: mobile
X-App-Version: 1.0.0
```

**é€šç”¨å“åº”æ ¼å¼**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1702012800
}
```

**é”™è¯¯ç **ï¼š
```
200 - æˆåŠŸ
400 - è¯·æ±‚å‚æ•°é”™è¯¯
401 - æœªæˆæƒ
403 - æ— æƒé™
404 - èµ„æºä¸å­˜åœ¨
500 - æœåŠ¡å™¨é”™è¯¯
```

---

### 3.2 ç”¨æˆ·è®¤è¯æ¨¡å—

#### 3.2.1 å‘é€éªŒè¯ç 

**æ¥å£**ï¼š`POST /auth/send-code`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "phone": "13800138000",
  "type": "login" // login | reset_password | bind_phone
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "éªŒè¯ç å·²å‘é€",
  "data": {
    "expireTime": 60 // ç§’
  }
}
```

---

#### 3.2.2 éªŒè¯ç ç™»å½•

**æ¥å£**ï¼š`POST /auth/login/code`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "phone": "13800138000",
  "code": "123456"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "u1",
      "name": "æ˜¯å…”å…”å‘€",
      "role": "user",
      "avatar": "https://cdn.bjdmaster.com/avatars/u1.jpg",
      "phone": "138****8000",
      "isRealName": false,
      "balance": 5000
    }
  }
}
```

---

#### 3.2.3 å¯†ç ç™»å½•

**æ¥å£**ï¼š`POST /auth/login/password`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "phone": "13800138000",
  "password": "password123"
}
```

**å“åº”**ï¼šåŒéªŒè¯ç ç™»å½•

---

#### 3.2.4 ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¾®ä¿¡ï¼‰

**æ¥å£**ï¼š`POST /auth/login/wechat`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "code": "wechat_auth_code"
}
```

**å“åº”**ï¼šåŒéªŒè¯ç ç™»å½•

---

#### 3.2.5 é‡ç½®å¯†ç 

**æ¥å£**ï¼š`POST /auth/reset-password`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "phone": "13800138000",
  "code": "123456",
  "newPassword": "newpass123"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å¯†ç é‡ç½®æˆåŠŸ"
}
```

---

### 3.3 ç”¨æˆ·èµ„æ–™æ¨¡å—

#### 3.3.1 è·å–ç”¨æˆ·ä¿¡æ¯

**æ¥å£**ï¼š`GET /users/{userId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": "u1",
    "name": "æ˜¯å…”å…”å‘€",
    "nickname": "å…”å…”",
    "role": "user",
    "avatar": "https://cdn.bjdmaster.com/avatars/u1.jpg",
    "bio": "å…¥å‘ä¸‰å¹´çš„BJDç©å®¶",
    "phone": "138****8000",
    "email": "user@example.com",
    "balance": 5000,
    "creditScore": 90,
    "isRealName": false,
    "followers": 342,
    "following": 56,
    "likes": 1205,
    "createTime": "2023-01-01T00:00:00Z"
  }
}
```

---

#### 3.3.2 æ›´æ–°ç”¨æˆ·èµ„æ–™

**æ¥å£**ï¼š`PUT /users/{userId}`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "name": "æ–°ç”¨æˆ·å",
  "nickname": "æ–°æ˜µç§°",
  "bio": "æ–°ç®€ä»‹",
  "avatar": "https://cdn.bjdmaster.com/avatars/new.jpg"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "èµ„æ–™æ›´æ–°æˆåŠŸ"
}
```

---

#### 3.3.3 ä¸Šä¼ å¤´åƒ

**æ¥å£**ï¼š`POST /users/{userId}/avatar`

**è¯·æ±‚ç±»å‹**ï¼š`multipart/form-data`

**è¯·æ±‚å‚æ•°**ï¼š
```
file: <binary>
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ä¸Šä¼ æˆåŠŸ",
  "data": {
    "url": "https://cdn.bjdmaster.com/avatars/u1_20231208.jpg"
  }
}
```

---

### 3.4 å®åè®¤è¯æ¨¡å—

#### 3.4.1 æäº¤å®åè®¤è¯

**æ¥å£**ï¼š`POST /users/{userId}/real-name`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "realName": "å¼ ä¸‰",
  "idNumber": "110101199001011234",
  "phone": "13800138000",
  "idCardFront": "https://cdn.bjdmaster.com/id/front.jpg",
  "idCardBack": "https://cdn.bjdmaster.com/id/back.jpg"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è®¤è¯ç”³è¯·å·²æäº¤ï¼Œé¢„è®¡1-3ä¸ªå·¥ä½œæ—¥å®¡æ ¸å®Œæˆ",
  "data": {
    "status": "pending" // pending | approved | rejected
  }
}
```

---

#### 3.4.2 æŸ¥è¯¢è®¤è¯çŠ¶æ€

**æ¥å£**ï¼š`GET /users/{userId}/real-name`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "status": "approved",
    "realName": "å¼ ä¸‰",
    "approvedAt": "2023-10-05T10:00:00Z"
  }
}
```

---

### 3.5 åœ°å€ç®¡ç†æ¨¡å—

#### 3.5.1 è·å–åœ°å€åˆ—è¡¨

**æ¥å£**ï¼š`GET /users/{userId}/addresses`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "å¼ ä¸‰",
      "phone": "13800138000",
      "province": "åŒ—äº¬å¸‚",
      "city": "åŒ—äº¬å¸‚",
      "district": "æœé˜³åŒº",
      "address": "å»ºå›½è·¯88å·",
      "isDefault": true
    }
  ]
}
```

---

#### 3.5.2 æ–°å¢åœ°å€

**æ¥å£**ï¼š`POST /users/{userId}/addresses`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "name": "æå››",
  "phone": "13900139000",
  "province": "ä¸Šæµ·å¸‚",
  "city": "ä¸Šæµ·å¸‚",
  "district": "æµ¦ä¸œæ–°åŒº",
  "address": "é™†å®¶å˜´ç¯è·¯1å·",
  "isDefault": false
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "åœ°å€æ·»åŠ æˆåŠŸ",
  "data": {
    "id": 2
  }
}
```

---

#### 3.5.3 æ›´æ–°åœ°å€

**æ¥å£**ï¼š`PUT /users/{userId}/addresses/{addressId}`

**è¯·æ±‚å‚æ•°**ï¼šåŒæ–°å¢åœ°å€

---

#### 3.5.4 åˆ é™¤åœ°å€

**æ¥å£**ï¼š`DELETE /users/{userId}/addresses/{addressId}`

---

#### 3.5.5 è®¾ç½®é»˜è®¤åœ°å€

**æ¥å£**ï¼š`PUT /users/{userId}/addresses/{addressId}/default`

---

### 3.6 å›¢è´­æ¨¡å—

#### 3.6.1 è·å–å›¢è´­åˆ—è¡¨

**æ¥å£**ï¼š`GET /group-buys`

**è¯·æ±‚å‚æ•°**ï¼š
```
page: 1
pageSize: 20
status: all | å¾é›†ä¸­ | åˆ¶ä½œä¸­ | è¡¥æ¬¾ä¸­
leaderId: l1 (å¯é€‰ï¼Œç­›é€‰æŒ‡å®šå›¢é•¿)
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 50,
    "list": [
      {
        "id": 101,
        "title": "ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“",
        "status": "å¾é›†ä¸­",
        "progress": 75,
        "leader": "çŸ¥åå›¢é•¿A",
        "leaderId": "l1",
        "price": 1500,
        "deposit": 500,
        "deadline": "2024-01-15T23:59:59Z",
        "image": "https://cdn.bjdmaster.com/products/101.jpg",
        "description": "é¹¿ç¥ç‰¹ä½“äºŒæ ·ä¿®æ”¹å®Œæ¯•ï¼Œå¢åŠ äº†å¯åŠ¨æ€§...",
        "skus": [
          { "id": "s1", "name": "ç™½è‚Œ", "price": 1500 },
          { "id": "s2", "name": "æ™®è‚Œ", "price": 1500 },
          { "id": "s3", "name": "çƒ§è‚Œ", "price": 1600 }
        ],
        "participants": 25,
        "views": 1250,
        "likes": 102,
        "createTime": "2023-12-01T10:00:00Z"
      }
    ]
  }
}
```

---

#### 3.6.2 è·å–å›¢è´­è¯¦æƒ…

**æ¥å£**ï¼š`GET /group-buys/{groupBuyId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": 101,
    "title": "ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“",
    "status": "å¾é›†ä¸­",
    "progress": 75,
    "leader": {
      "id": "l1",
      "name": "çŸ¥åå›¢é•¿A",
      "avatar": "https://cdn.bjdmaster.com/avatars/l1.jpg",
      "rating": 4.9,
      "followers": 1250,
      "isVerified": true
    },
    "price": 1500,
    "deposit": 500,
    "deadline": "2024-01-15T23:59:59Z",
    "images": [
      "https://cdn.bjdmaster.com/products/101_1.jpg",
      "https://cdn.bjdmaster.com/products/101_2.jpg"
    ],
    "description": "é¹¿ç¥ç‰¹ä½“äºŒæ ·ä¿®æ”¹å®Œæ¯•ï¼Œå¢åŠ äº†å¯åŠ¨æ€§...",
    "skus": [
      { "id": "s1", "name": "ç™½è‚Œ", "price": 1500, "stock": 50 },
      { "id": "s2", "name": "æ™®è‚Œ", "price": 1500, "stock": 50 },
      { "id": "s3", "name": "çƒ§è‚Œ", "price": 1600, "stock": 30 }
    ],
    "participants": 25,
    "views": 1250,
    "likes": 102,
    "comments": 45,
    "createTime": "2023-12-01T10:00:00Z"
  }
}
```

---

#### 3.6.3 åˆ›å»ºå›¢è´­ï¼ˆå›¢é•¿ï¼‰

**æ¥å£**ï¼š`POST /group-buys`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "title": "ã€æ–°å›¢ã€‘å››åˆ†BJD æ´›ä¸½å¡”æ´‹è£…",
  "price": 800,
  "deposit": 300,
  "deadline": "2024-02-01T23:59:59Z",
  "description": "åŸåˆ›è®¾è®¡ï¼Œæ‰‹å·¥åˆ¶ä½œ",
  "images": [
    "https://cdn.bjdmaster.com/products/upload_1.jpg"
  ],
  "skus": [
    { "name": "ç™½è‚Œ", "price": 800 },
    { "name": "æ™®è‚Œ", "price": 800 }
  ]
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å›¢è´­åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": 103
  }
}
```

---

#### 3.6.4 æ›´æ–°å›¢è´­è¿›åº¦ï¼ˆå›¢é•¿ï¼‰

**æ¥å£**ï¼š`PUT /group-buys/{groupBuyId}/progress`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "progress": 100,
  "status": "è¡¥æ¬¾ä¸­",
  "note": "åˆ¶ä½œå®Œæˆï¼Œè¯·å¤§å®¶å°½å¿«è¡¥æ¬¾"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è¿›åº¦æ›´æ–°æˆåŠŸï¼Œå·²é€šçŸ¥æ‰€æœ‰å‚å›¢ç”¨æˆ·"
}
```

**å‰¯ä½œç”¨**ï¼š
- è‹¥progress=100ï¼Œè‡ªåŠ¨è§¦å‘æ‰€æœ‰è®¢å•çŠ¶æ€ï¼šåˆ¶ä½œä¸­ â†’ å¾…è¡¥æ¬¾
- å‘é€é€šçŸ¥ç»™æ‰€æœ‰å‚å›¢ç”¨æˆ·

---

#### 3.6.5 å¯¼å…¥SKUï¼ˆExcelï¼‰

**æ¥å£**ï¼š`POST /group-buys/import-skus`

**è¯·æ±‚ç±»å‹**ï¼š`multipart/form-data`

**è¯·æ±‚å‚æ•°**ï¼š
```
file: <binary> (.xlsx / .xls)
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å¯¼å…¥æˆåŠŸ",
  "data": {
    "skus": [
      { "name": "ç™½è‚Œ", "price": 1500 },
      { "name": "æ™®è‚Œ", "price": 1500 },
      { "name": "çƒ§è‚Œ", "price": 1600 }
    ]
  }
}
```

---

### 3.7 è®¢å•æ¨¡å—

#### 3.7.1 åˆ›å»ºè®¢å•ï¼ˆå‚å›¢ï¼‰

**æ¥å£**ï¼š`POST /orders`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "groupBuyId": 101,
  "skuId": "s1",
  "addressId": 1
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "id": "o1701234567890",
    "status": "unpaid_deposit",
    "contractId": "CT-o1701234567890"
  }
}
```

---

#### 3.7.2 è·å–è®¢å•åˆ—è¡¨

**æ¥å£**ï¼š`GET /orders`

**è¯·æ±‚å‚æ•°**ï¼š
```
userId: u1
status: all | unpaid_deposit | wait_verify | production | wait_final | wait_ship | shipped | completed
page: 1
pageSize: 20
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 10,
    "list": [
      {
        "id": "o1",
        "userId": "u1",
        "groupBuyId": 101,
        "skuId": "s1",
        "skuName": "ç™½è‚Œ",
        "price": 1500,
        "deposit": 500,
        "paidDeposit": 500,
        "finalPayment": 1000,
        "paidFinal": 0,
        "status": "production",
        "progress": 75,
        "createTime": "2023-10-01T10:00:00Z",
        "image": "https://cdn.bjdmaster.com/products/101.jpg",
        "title": "ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“",
        "leader": "çŸ¥åå›¢é•¿A"
      }
    ]
  }
}
```

---

#### 3.7.3 è·å–è®¢å•è¯¦æƒ…

**æ¥å£**ï¼š`GET /orders/{orderId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": "o1",
    "userId": "u1",
    "groupBuy": {
      "id": 101,
      "title": "ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“",
      "image": "https://cdn.bjdmaster.com/products/101.jpg",
      "leader": "çŸ¥åå›¢é•¿A",
      "progress": 75
    },
    "sku": {
      "id": "s1",
      "name": "ç™½è‚Œ",
      "price": 1500
    },
    "price": 1500,
    "deposit": 500,
    "paidDeposit": 500,
    "finalPayment": 1000,
    "paidFinal": 0,
    "status": "production",
    "address": {
      "id": 1,
      "name": "å¼ ä¸‰",
      "phone": "13800138000",
      "address": "åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½è·¯88å·"
    },
    "contractId": "CT-o1",
    "createTime": "2023-10-01T10:00:00Z",
    "paidDepositTime": "2023-10-01T10:05:00Z",
    "verifiedTime": "2023-10-01T11:00:00Z",
    "shipping": {
      "trackingNumber": "",
      "company": "",
      "shippedAt": null
    }
  }
}
```

---

#### 3.7.4 æ”¯ä»˜å®šé‡‘

**æ¥å£**ï¼š`POST /orders/{orderId}/pay-deposit`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "paymentMethod": "alipay", // alipay | wechat | bank
  "amount": 500,
  "paymentProof": "https://cdn.bjdmaster.com/proofs/pay_xxx.jpg" // æ”¯ä»˜æˆªå›¾
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å®šé‡‘æ”¯ä»˜æˆåŠŸï¼Œç­‰å¾…å›¢é•¿å®¡æ ¸",
  "data": {
    "status": "wait_verify"
  }
}
```

---

#### 3.7.5 æ”¯ä»˜å°¾æ¬¾

**æ¥å£**ï¼š`POST /orders/{orderId}/pay-final`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "paymentMethod": "alipay",
  "amount": 1000,
  "paymentProof": "https://cdn.bjdmaster.com/proofs/pay_xxx.jpg"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å°¾æ¬¾æ”¯ä»˜æˆåŠŸï¼Œç­‰å¾…å‘è´§",
  "data": {
    "status": "wait_ship"
  }
}
```

---

#### 3.7.6 å®¡æ ¸è®¢å•ï¼ˆå›¢é•¿ï¼‰

**æ¥å£**ï¼š`POST /orders/{orderId}/verify`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "action": "approve", // approve | reject
  "note": "å·²æ”¶åˆ°å®šé‡‘"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è®¢å•å®¡æ ¸é€šè¿‡",
  "data": {
    "status": "production"
  }
}
```

---

#### 3.7.7 å‘è´§ï¼ˆå›¢é•¿ï¼‰

**æ¥å£**ï¼š`POST /orders/{orderId}/ship`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "trackingNumber": "SF1234567890",
  "company": "é¡ºä¸°é€Ÿè¿",
  "note": "å·²å‘è´§ï¼Œè¯·æ³¨æ„æŸ¥æ”¶"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å‘è´§æˆåŠŸï¼Œå·²é€šçŸ¥ä¹°å®¶"
}
```

---

#### 3.7.8 å¯¼å‡ºè®¢å•ï¼ˆå›¢é•¿ï¼‰

**æ¥å£**ï¼š`GET /orders/export`

**è¯·æ±‚å‚æ•°**ï¼š
```
groupBuyId: 101
format: xlsx | csv
```

**å“åº”**ï¼š
```
Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
Content-Disposition: attachment; filename="orders_20231208.xlsx"

<binary data>
```

---

### 3.8 è½¬å•æ¨¡å—

#### 3.8.1 ç”Ÿæˆè½¬å•ç 

**æ¥å£**ï¼š`POST /orders/{orderId}/transfer/generate`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è½¬å•ç ç”ŸæˆæˆåŠŸ",
  "data": {
    "transferCode": "TRANS-o1-ABCDE",
    "expireTime": "2023-12-15T23:59:59Z" // 7å¤©æœ‰æ•ˆæœŸ
  }
}
```

---

#### 3.8.2 æŸ¥è¯¢è½¬å•ä¿¡æ¯

**æ¥å£**ï¼š`GET /transfer/{transferCode}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "transferCode": "TRANS-o1-ABCDE",
    "order": {
      "id": "o1",
      "title": "ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“",
      "skuName": "ç™½è‚Œ",
      "image": "https://cdn.bjdmaster.com/products/101.jpg",
      "price": 1500,
      "deposit": 500,
      "progress": 75,
      "status": "production"
    },
    "seller": {
      "id": "u1",
      "name": "æ˜¯å…”å…”å‘€",
      "avatar": "https://cdn.bjdmaster.com/avatars/u1.jpg"
    },
    "expireTime": "2023-12-15T23:59:59Z",
    "isExpired": false
  }
}
```

---

#### 3.8.3 æ¥æ”¶è½¬å•

**æ¥å£**ï¼š`POST /transfer/{transferCode}/claim`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "addressId": 2 // æ–°ä¹°å®¶çš„æ”¶è´§åœ°å€
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è½¬å•æˆåŠŸï¼è®¢å•å·²å½’å…¥æ‚¨çš„åä¸‹",
  "data": {
    "orderId": "o1",
    "newOwnerId": "u2"
  }
}
```

**å‰¯ä½œç”¨**ï¼š
- è®¢å•æ‰€æœ‰æƒè½¬ç§»ï¼šuserId: u1 â†’ u2
- æ›´æ–°æ”¶è´§åœ°å€ä¸ºæ–°ä¹°å®¶çš„åœ°å€
- é€šçŸ¥å›¢é•¿ï¼šè®¢å•å·²è½¬è®©
- é€šçŸ¥åŸä¹°å®¶ï¼šè½¬å•æˆåŠŸ

---

### 3.9 åˆåŒæ¨¡å—

#### 3.9.1 ç­¾ç½²åˆåŒ

**æ¥å£**ï¼š`POST /contracts/sign`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "orderId": "o1",
  "agreed": true,
  "signature": "data:image/png;base64,iVBORw0KGg..." // ç­¾åå›¾ç‰‡base64
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "åˆåŒç­¾ç½²æˆåŠŸ",
  "data": {
    "contractId": "CT-o1",
    "contractUrl": "https://cdn.bjdmaster.com/contracts/CT-o1.pdf",
    "signedAt": "2023-10-01T10:05:00Z"
  }
}
```

---

#### 3.9.2 è·å–åˆåŒåˆ—è¡¨

**æ¥å£**ï¼š`GET /users/{userId}/contracts`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": [
    {
      "id": "CT-o1",
      "orderId": "o1",
      "title": "ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“",
      "status": "signed",
      "signedAt": "2023-10-01T10:05:00Z",
      "contractUrl": "https://cdn.bjdmaster.com/contracts/CT-o1.pdf"
    }
  ]
}
```

---

#### 3.9.3 ä¸‹è½½åˆåŒ

**æ¥å£**ï¼š`GET /contracts/{contractId}/download`

**å“åº”**ï¼š
```
Content-Type: application/pdf
Content-Disposition: attachment; filename="contract_CT-o1.pdf"

<binary data>
```

---

### 3.10 ç¤¾äº¤æ¨¡å—

#### 3.10.1 å‘å¸ƒåŠ¨æ€

**æ¥å£**ï¼š`POST /posts`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "content": "ç»ˆäºç­‰åˆ°æˆ‘çš„å°å¯çˆ±å›å®¶äº†ï¼è¿™ç§è‚¤è‰²çœŸçš„ç»ç¾...",
  "images": [
    "https://cdn.bjdmaster.com/posts/img1.jpg",
    "https://cdn.bjdmaster.com/posts/img2.jpg"
  ],
  "tags": ["BJD", "ç§å…»å›¾", "ä¸‰åˆ†å¨ƒ"]
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å‘å¸ƒæˆåŠŸ",
  "data": {
    "id": 201
  }
}
```

---

#### 3.10.2 è·å–åŠ¨æ€åˆ—è¡¨

**æ¥å£**ï¼š`GET /posts`

**è¯·æ±‚å‚æ•°**ï¼š
```
page: 1
pageSize: 20
userId: u1 (å¯é€‰ï¼Œç­›é€‰æŒ‡å®šç”¨æˆ·)
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 100,
    "list": [
      {
        "id": 201,
        "user": {
          "id": "u1",
          "name": "å…»å¨ƒå¤§æˆ·",
          "avatar": "https://cdn.bjdmaster.com/avatars/u1.jpg",
          "isVerified": true,
          "tags": ["èµ„æ·±ç©å®¶"]
        },
        "content": "ç»ˆäºç­‰åˆ°æˆ‘çš„å°å¯çˆ±å›å®¶äº†ï¼è¿™ç§è‚¤è‰²çœŸçš„ç»ç¾...",
        "images": [
          "https://cdn.bjdmaster.com/posts/img1.jpg"
        ],
        "tags": ["BJD", "ç§å…»å›¾"],
        "likes": 124,
        "comments": 32,
        "isLiked": false,
        "distance": "1.2km",
        "createTime": "2023-12-08T10:00:00Z"
      }
    ]
  }
}
```

---

#### 3.10.3 è·å–åŠ¨æ€è¯¦æƒ…

**æ¥å£**ï¼š`GET /posts/{postId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": 201,
    "user": {
      "id": "u1",
      "name": "å…»å¨ƒå¤§æˆ·",
      "avatar": "https://cdn.bjdmaster.com/avatars/u1.jpg",
      "isVerified": true,
      "tags": ["èµ„æ·±ç©å®¶"]
    },
    "content": "ç»ˆäºç­‰åˆ°æˆ‘çš„å°å¯çˆ±å›å®¶äº†ï¼...",
    "images": [
      "https://cdn.bjdmaster.com/posts/img1.jpg"
    ],
    "tags": ["BJD", "ç§å…»å›¾"],
    "likes": 124,
    "comments": 32,
    "isLiked": false,
    "distance": "1.2km",
    "createTime": "2023-12-08T10:00:00Z"
  }
}
```

---

#### 3.10.4 ç‚¹èµ/å–æ¶ˆç‚¹èµ

**æ¥å£**ï¼š`POST /posts/{postId}/like`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "action": "like" // like | unlike
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "likes": 125
  }
}
```

---

#### 3.10.5 è¯„è®ºåŠ¨æ€

**æ¥å£**ï¼š`POST /posts/{postId}/comments`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "content": "å¤ªç¾äº†ï¼æ±‚é“¾æ¥ï¼",
  "replyTo": null // å¯é€‰ï¼Œå›å¤æŒ‡å®šè¯„è®ºID
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è¯„è®ºæˆåŠŸ",
  "data": {
    "id": 1001,
    "user": {
      "id": "u2",
      "name": "æ‰‹ä½œå¨˜å°B",
      "avatar": "https://cdn.bjdmaster.com/avatars/u2.jpg"
    },
    "content": "å¤ªç¾äº†ï¼æ±‚é“¾æ¥ï¼",
    "likes": 0,
    "createTime": "2023-12-08T11:00:00Z"
  }
}
```

---

#### 3.10.6 è·å–è¯„è®ºåˆ—è¡¨

**æ¥å£**ï¼š`GET /posts/{postId}/comments`

**è¯·æ±‚å‚æ•°**ï¼š
```
page: 1
pageSize: 20
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 32,
    "list": [
      {
        "id": 1,
        "user": {
          "id": "u2",
          "name": "æ‰‹ä½œå¨˜å°B",
          "avatar": "https://cdn.bjdmaster.com/avatars/u2.jpg"
        },
        "content": "å¤ªç¾äº†ï¼æ±‚é“¾æ¥ï¼",
        "likes": 5,
        "createTime": "2023-12-08T09:00:00Z",
        "replies": []
      }
    ]
  }
}
```

---

#### 3.10.7 å…³æ³¨/å–æ¶ˆå…³æ³¨

**æ¥å£**ï¼š`POST /users/{userId}/follow`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "action": "follow" // follow | unfollow
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å…³æ³¨æˆåŠŸ"
}
```

---

#### 3.10.8 è·å–å…³æ³¨åˆ—è¡¨

**æ¥å£**ï¼š`GET /users/{userId}/following`

**è¯·æ±‚å‚æ•°**ï¼š
```
page: 1
pageSize: 20
type: all | leader | user
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 56,
    "list": [
      {
        "id": "l1",
        "name": "çŸ¥åå›¢é•¿A",
        "avatar": "https://cdn.bjdmaster.com/avatars/l1.jpg",
        "role": "leader",
        "bio": "ä¸“æ³¨ä¸‰åˆ†/å››åˆ†å¨ƒè¡£å›¢è´­",
        "followers": 1250
      }
    ]
  }
}
```

---

#### 3.10.9 è·å–ç²‰ä¸åˆ—è¡¨

**æ¥å£**ï¼š`GET /users/{userId}/followers`

**å“åº”**ï¼šåŒå…³æ³¨åˆ—è¡¨

---

### 3.11 é€šçŸ¥æ¨¡å—

#### 3.11.1 è·å–é€šçŸ¥åˆ—è¡¨

**æ¥å£**ï¼š`GET /notifications`

**è¯·æ±‚å‚æ•°**ï¼š
```
page: 1
pageSize: 20
type: all | comment | like | follow | system
isRead: all | true | false
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 50,
    "unreadCount": 15,
    "list": [
      {
        "id": 1,
        "type": "system",
        "title": "è¡¥æ¬¾é€šçŸ¥",
        "content": "æ‚¨å‚ä¸çš„å›¢è´­ã€é¹¿ç¥ç´ ä½“ã€‘å·²åˆ¶ä½œå®Œæˆï¼Œè¯·åœ¨30å¤©å†…è¡¥é½å°¾æ¬¾",
        "relatedId": "o1",
        "relatedType": "order",
        "isRead": false,
        "createTime": "2023-12-08T10:00:00Z"
      },
      {
        "id": 2,
        "type": "comment",
        "title": "æ–°è¯„è®º",
        "content": "æ‰‹ä½œå¨˜å°B è¯„è®ºäº†ä½ çš„åŠ¨æ€",
        "relatedId": 201,
        "relatedType": "post",
        "isRead": false,
        "createTime": "2023-12-08T09:30:00Z"
      }
    ]
  }
}
```

---

#### 3.11.2 æ ‡è®°å·²è¯»

**æ¥å£**ï¼š`PUT /notifications/{notificationId}/read`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å·²æ ‡è®°ä¸ºå·²è¯»"
}
```

---

#### 3.11.3 å…¨éƒ¨æ ‡è®°å·²è¯»

**æ¥å£**ï¼š`PUT /notifications/read-all`

---

---

### 3.12 å¨ƒå¨ƒæ¡£æ¡ˆæ¨¡å— â­ æ–°å¢

#### 3.12.1 è·å–å¨ƒå¨ƒåˆ—è¡¨

**æ¥å£**ï¼š`GET /dolls`

**è¯·æ±‚å‚æ•°**ï¼š
```
userId: u1  // ç”¨æˆ·ID
page: 1
pageSize: 20
sortBy: createTime | name | daysOwned  // æ’åºæ–¹å¼
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 3,
    "list": [
      {
        "id": "d1",
        "userId": "u1",
        "name": "å°é¹¿",
        "brand": "è‡ªåˆ¶ç‰¹ä½“",
        "size": "1/3",
        "skinColor": "ç™½è‚Œ",
        "birthday": "2023-10-15",
        "weight": 200,
        "height": 60,
        "mainImage": "https://cdn.bjdmaster.com/dolls/d1/main.jpg",
        "images": [
          "https://cdn.bjdmaster.com/dolls/d1/1.jpg",
          "https://cdn.bjdmaster.com/dolls/d1/2.jpg"
        ],
        "orderId": "o1",
        "contractId": "CT-o1",
        "makeup": "åŸå‚å¦†",
        "outfitCount": 12,
        "photoCount": 89,
        "maintenanceCount": 2,
        "daysOwned": 54,
        "createTime": "2023-10-15T00:00:00Z",
        "updateTime": "2023-12-01T00:00:00Z"
      }
    ]
  }
}
```

---

#### 3.12.2 è·å–å¨ƒå¨ƒè¯¦æƒ…

**æ¥å£**ï¼š`GET /dolls/{dollId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": "d1",
    "userId": "u1",
    "name": "å°é¹¿",
    "brand": "è‡ªåˆ¶ç‰¹ä½“",
    "size": "1/3",
    "skinColor": "ç™½è‚Œ",
    "birthday": "2023-10-15",
    "weight": 200,
    "height": 60,
    "eyeColor": "è“è‰²",
    "wigColor": "é‡‘è‰²",
    "makeup": "åŸå‚å¦†",
    "mainImage": "https://cdn.bjdmaster.com/dolls/d1/main.jpg",
    "images": [
      "https://cdn.bjdmaster.com/dolls/d1/1.jpg",
      "https://cdn.bjdmaster.com/dolls/d1/2.jpg",
      "https://cdn.bjdmaster.com/dolls/d1/3.jpg"
    ],
    "orderId": "o1",
    "contractId": "CT-o1",
    "outfitCount": 12,
    "photoCount": 89,
    "daysOwned": 54,
    "notes": "æˆ‘çš„ç¬¬ä¸€åªå¨ƒï¼Œéå¸¸çæƒœ",
    "maintenanceRecords": [
      {
        "id": "mr1",
        "date": "2023-11-20",
        "type": "æ¸…æ´ä¿å…»",
        "note": "å…¨èº«æ¸…æ´ï¼Œå…³èŠ‚ä¸Šæ²¹",
        "images": [],
        "createTime": "2023-11-20T00:00:00Z"
      },
      {
        "id": "mr2",
        "date": "2023-12-01",
        "type": "ç»´ä¿®",
        "note": "å·¦æ‰‹å…³èŠ‚æ¾åŠ¨ï¼Œå·²åŠ ç´§",
        "images": [],
        "createTime": "2023-12-01T00:00:00Z"
      }
    ],
    "createTime": "2023-10-15T00:00:00Z",
    "updateTime": "2023-12-01T00:00:00Z"
  }
}
```

---

#### 3.12.3 æ·»åŠ å¨ƒå¨ƒ

**æ¥å£**ï¼š`POST /dolls`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "name": "å°é¹¿",
  "brand": "è‡ªåˆ¶ç‰¹ä½“",
  "size": "1/3",
  "skinColor": "ç™½è‚Œ",
  "birthday": "2023-10-15",
  "weight": 200,
  "height": 60,
  "eyeColor": "è“è‰²",
  "wigColor": "é‡‘è‰²",
  "makeup": "åŸå‚å¦†",
  "orderId": "o1",
  "notes": "æˆ‘çš„ç¬¬ä¸€åªå¨ƒ",
  "images": [
    "https://cdn.bjdmaster.com/dolls/temp/1.jpg",
    "https://cdn.bjdmaster.com/dolls/temp/2.jpg"
  ]
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ·»åŠ æˆåŠŸ",
  "data": {
    "id": "d1",
    "name": "å°é¹¿",
    "createTime": "2023-10-15T00:00:00Z"
  }
}
```

---

#### 3.12.4 æ›´æ–°å¨ƒå¨ƒä¿¡æ¯

**æ¥å£**ï¼š`PUT /dolls/{dollId}`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "name": "å°é¹¿",
  "weight": 205,
  "notes": "æ›´æ–°åçš„å¤‡æ³¨",
  "images": [
    "https://cdn.bjdmaster.com/dolls/d1/1.jpg"
  ]
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ"
}
```

---

#### 3.12.5 åˆ é™¤å¨ƒå¨ƒ

**æ¥å£**ï¼š`DELETE /dolls/{dollId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ"
}
```

---

#### 3.12.6 æ·»åŠ ä¿å…»è®°å½•

**æ¥å£**ï¼š`POST /dolls/{dollId}/maintenance`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "date": "2023-12-08",
  "type": "æ¸…æ´ä¿å…»",
  "note": "å…¨èº«æ¸…æ´ï¼Œå…³èŠ‚ä¸Šæ²¹",
  "images": [
    "https://cdn.bjdmaster.com/maintenance/1.jpg"
  ]
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ·»åŠ æˆåŠŸ",
  "data": {
    "id": "mr3",
    "createTime": "2023-12-08T00:00:00Z"
  }
}
```

---

#### 3.12.7 ç”Ÿæˆç”µå­èº«ä»½è¯

**æ¥å£**ï¼š`POST /dolls/{dollId}/id-card`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "template": "default" // default | elegant | cute
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "imageUrl": "https://cdn.bjdmaster.com/id-cards/d1.png",
    "shareUrl": "https://bjdmaster.com/share/doll/d1"
  }
}
```

---

### 3.13 æˆå°±ç³»ç»Ÿæ¨¡å— â­ æ–°å¢

#### 3.13.1 è·å–æˆå°±åˆ—è¡¨

**æ¥å£**ï¼š`GET /achievements`

**è¯·æ±‚å‚æ•°**ï¼š
```
userId: u1
category: all | newbie | shopping | social
status: all | unlocked | locked
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "summary": {
      "totalCount": 15,
      "unlockedCount": 3,
      "progressPercent": 20
    },
    "list": [
      {
        "id": "newbie_badge",
        "category": "æ–°æ‰‹æˆå°±",
        "name": "å…¥å‘å¾½ç« ",
        "description": "å®Œæˆé¦–æ¬¡å‚å›¢",
        "icon": "ğŸ‰",
        "progress": 1,
        "required": 1,
        "unlocked": true,
        "unlockedAt": "2023-10-01T00:00:00Z",
        "rarity": 1,
        "reward": {
          "badge": true,
          "coupon": 10,
          "credit": 5
        },
        "totalUnlocked": 12450
      },
      {
        "id": "shopaholic",
        "category": "è´­ç‰©æˆå°±",
        "name": "å‰æ‰‹ç‹",
        "description": "å‚ä¸5æ¬¡å›¢è´­",
        "icon": "ğŸ›ï¸",
        "progress": 2,
        "required": 5,
        "unlocked": false,
        "unlockedAt": null,
        "rarity": 2,
        "reward": {
          "badge": true,
          "coupon": 50,
          "credit": 15
        },
        "totalUnlocked": 3456
      }
    ]
  }
}
```

---

#### 3.13.2 æ£€æŸ¥æˆå°±è§£é”

**æ¥å£**ï¼š`POST /achievements/check`

**è¯´æ˜**ï¼šæœåŠ¡ç«¯åœ¨ç‰¹å®šäº‹ä»¶è§¦å‘æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œæ£€æŸ¥æ˜¯å¦è§£é”æ–°æˆå°±

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "userId": "u1",
  "eventType": "order_complete",
  "eventData": {
    "orderId": "o1",
    "amount": 2000
  }
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "unlocked": true,
    "achievements": [
      {
        "id": "newbie_badge",
        "name": "å…¥å‘å¾½ç« ",
        "reward": {
          "badge": true,
          "coupon": 10,
          "credit": 5
        }
      }
    ]
  }
}
```

---

#### 3.13.3 é¢†å–æˆå°±å¥–åŠ±

**æ¥å£**ï¼š`POST /achievements/{achievementId}/claim`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å¥–åŠ±å·²å‘æ”¾",
  "data": {
    "coupon": {
      "id": "c123",
      "amount": 10,
      "expireTime": "2024-01-08T00:00:00Z"
    },
    "creditAdded": 5
  }
}
```

---

### 3.14 çŸ¥è¯†åº“æ¨¡å— â­ æ–°å¢

#### 3.14.1 è·å–æ–‡ç« åˆ—è¡¨

**æ¥å£**ï¼š`GET /knowledge/articles`

**è¯·æ±‚å‚æ•°**ï¼š
```
category: all | æ–°æ‰‹æŒ‡å— | å“ç‰Œå¤§å…¨ | æœ¯è¯­è§£é‡Š | é¿å‘æŒ‡å— | ä¿å…»æ•™ç¨‹
keyword: æœç´¢å…³é”®è¯
page: 1
pageSize: 20
sortBy: views | likes | createTime
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 50,
    "list": [
      {
        "id": 1,
        "category": "æ–°æ‰‹æŒ‡å—",
        "title": "BJDå…¥é—¨æŒ‡å—ï¼šä»€ä¹ˆæ˜¯BJDï¼Ÿ",
        "summary": "è¯¦ç»†ä»‹ç»BJDçš„å†å²ã€åˆ†ç±»ã€å°ºå¯¸ç­‰åŸºç¡€çŸ¥è¯†",
        "coverImage": "https://cdn.bjdmaster.com/knowledge/1.jpg",
        "author": {
          "id": "admin",
          "name": "å®˜æ–¹ç¼–è¾‘",
          "avatar": "https://cdn.bjdmaster.com/avatars/admin.jpg"
        },
        "type": "article",
        "difficulty": "å…¥é—¨",
        "readTime": 5,
        "views": 12500,
        "likes": 450,
        "tags": ["æ–°æ‰‹å¿…è¯»", "åŸºç¡€çŸ¥è¯†"],
        "createTime": "2023-01-01T00:00:00Z",
        "updateTime": "2023-12-01T00:00:00Z"
      }
    ]
  }
}
```

---

#### 3.14.2 è·å–æ–‡ç« è¯¦æƒ…

**æ¥å£**ï¼š`GET /knowledge/articles/{articleId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": 1,
    "category": "æ–°æ‰‹æŒ‡å—",
    "title": "BJDå…¥é—¨æŒ‡å—ï¼šä»€ä¹ˆæ˜¯BJDï¼Ÿ",
    "summary": "è¯¦ç»†ä»‹ç»BJDçš„å†å²ã€åˆ†ç±»ã€å°ºå¯¸ç­‰åŸºç¡€çŸ¥è¯†",
    "content": "# BJDæ˜¯ä»€ä¹ˆï¼Ÿ\n\nBJDï¼ˆBall-Jointed Dollï¼‰æ˜¯çƒå½¢å…³èŠ‚äººå¶...",
    "contentHtml": "<h1>BJDæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>BJDï¼ˆBall-Jointed Dollï¼‰æ˜¯çƒå½¢å…³èŠ‚äººå¶...</p>",
    "coverImage": "https://cdn.bjdmaster.com/knowledge/1.jpg",
    "images": [
      "https://cdn.bjdmaster.com/knowledge/1-1.jpg",
      "https://cdn.bjdmaster.com/knowledge/1-2.jpg"
    ],
    "videoUrl": "",
    "author": {
      "id": "admin",
      "name": "å®˜æ–¹ç¼–è¾‘",
      "avatar": "https://cdn.bjdmaster.com/avatars/admin.jpg"
    },
    "type": "article",
    "difficulty": "å…¥é—¨",
    "readTime": 5,
    "views": 12500,
    "likes": 450,
    "isLiked": false,
    "tags": ["æ–°æ‰‹å¿…è¯»", "åŸºç¡€çŸ¥è¯†"],
    "relatedArticles": [2, 3, 4],
    "createTime": "2023-01-01T00:00:00Z",
    "updateTime": "2023-12-01T00:00:00Z"
  }
}
```

---

#### 3.14.3 è·å–çƒ­é—¨é—®ç­”

**æ¥å£**ï¼š`GET /knowledge/questions`

**è¯·æ±‚å‚æ•°**ï¼š
```
page: 1
pageSize: 10
sortBy: hot | new
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 200,
    "list": [
      {
        "id": 1,
        "question": "ä¸‰åˆ†å’Œå››åˆ†å“ªä¸ªæ›´é€‚åˆæ–°æ‰‹ï¼Ÿ",
        "asker": {
          "id": "u1",
          "name": "æ–°æ‰‹å°ç™½",
          "avatar": "https://cdn.bjdmaster.com/avatars/u1.jpg"
        },
        "answerCount": 23,
        "views": 3400,
        "bestAnswer": {
          "id": "a1",
          "content": "å»ºè®®ä»å››åˆ†å¼€å§‹ï¼Œå°ºå¯¸é€‚ä¸­ï¼Œä»·æ ¼ç›¸å¯¹è¾ƒä½...",
          "author": {
            "id": "l1",
            "name": "èµ„æ·±ç©å®¶",
            "avatar": "https://cdn.bjdmaster.com/avatars/l1.jpg"
          },
          "likes": 56,
          "createTime": "2023-11-01T00:00:00Z"
        },
        "tags": ["å°ºå¯¸é€‰æ‹©", "æ–°æ‰‹æŒ‡å—"],
        "createTime": "2023-10-28T00:00:00Z"
      }
    ]
  }
}
```

---

#### 3.14.4 æœç´¢çŸ¥è¯†åº“

**æ¥å£**ï¼š`GET /knowledge/search`

**è¯·æ±‚å‚æ•°**ï¼š
```
keyword: BJD
type: all | article | question
page: 1
pageSize: 20
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "articles": {
      "total": 15,
      "list": [...]
    },
    "questions": {
      "total": 8,
      "list": [...]
    }
  }
}
```

---

#### 3.14.5 ç‚¹èµæ–‡ç« /å›ç­”

**æ¥å£**ï¼š`POST /knowledge/{type}/{id}/like`

**è¯´æ˜**ï¼štypeå¯ä»¥æ˜¯ articles æˆ– answers

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "likes": 451
  }
}
```

---

### 3.15 ä¿è¯é‡‘ç®¡ç†æ¨¡å— â­ æ–°å¢

#### 3.15.1 è·å–ä¿è¯é‡‘ä¿¡æ¯

**æ¥å£**ï¼š`GET /deposits/leader/{leaderId}`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "leaderId": "l1",
    "depositAmount": 5000,
    "depositStatus": "active",
    "depositInterest": 150,
    "withdrawableInterest": 150,
    "creditScore": 95,
    "requiredAmount": 3000,
    "penaltyRecords": [
      {
        "id": "pr1",
        "orderId": "o10",
        "reason": "å»¶æœŸæœªé€šçŸ¥",
        "amount": 200,
        "createTime": "2023-11-01T00:00:00Z"
      }
    ],
    "depositTime": "2023-01-01T00:00:00Z",
    "updateTime": "2023-12-01T00:00:00Z"
  }
}
```

---

#### 3.15.2 ç¼´çº³ä¿è¯é‡‘

**æ¥å£**ï¼š`POST /deposits/pay`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "amount": 5000,
  "paymentMethod": "alipay"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "ä¿è¯é‡‘ç¼´çº³æˆåŠŸ",
  "data": {
    "orderId": "dep_123",
    "payUrl": "https://pay.example.com/..."
  }
}
```

---

#### 3.15.3 æå–åˆ©æ¯

**æ¥å£**ï¼š`POST /deposits/withdraw-interest`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "amount": 150
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "åˆ©æ¯æå–æˆåŠŸ",
  "data": {
    "withdrawAmount": 150,
    "remainingInterest": 0,
    "arriveTime": "2023-12-10T00:00:00Z"
  }
}
```

---

### 3.16 è®¢é‡‘æ‰˜ç®¡æ¨¡å— â­ æ–°å¢

#### 3.16.1 æ”¯ä»˜è®¢é‡‘ï¼ˆæ‰˜ç®¡ï¼‰

**æ¥å£**ï¼š`POST /orders/{orderId}/deposit-escrow`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "amount": 500,
  "paymentMethod": "alipay"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è®¢é‡‘å·²æ‰˜ç®¡",
  "data": {
    "orderId": "o1",
    "depositStatus": "escrow",
    "escrowAmount": 500,
    "payUrl": "https://pay.example.com/..."
  }
}
```

---

#### 3.16.2 æŸ¥è¯¢æ‰˜ç®¡çŠ¶æ€

**æ¥å£**ï¼š`GET /orders/{orderId}/escrow-status`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "orderId": "o1",
    "depositStatus": "escrow",
    "escrowAmount": 500,
    "willSettleAt": "2023-12-15T00:00:00Z",
    "canRefundBefore": "2023-12-10T00:00:00Z"
  }
}
```

---

#### 3.16.3 ç”³è¯·é€€æ¬¾

**æ¥å£**ï¼š`POST /orders/{orderId}/refund`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "reason": "æµå›¢å¤±è´¥",
  "evidence": [
    "https://cdn.bjdmaster.com/evidence/1.jpg"
  ]
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "é€€æ¬¾ç”³è¯·å·²æäº¤ï¼Œé¢„è®¡3ä¸ªå·¥ä½œæ—¥å†…åˆ°è´¦",
  "data": {
    "refundId": "rf_123",
    "refundAmount": 500,
    "estimatedArrivalTime": "2023-12-11T00:00:00Z"
  }
}
```

---

### 3.17 è‡ªåŠ¨å‚¬æ¬¾æ¨¡å— â­ æ–°å¢

#### 3.17.1 è·å–å‚¬æ¬¾è®°å½•

**æ¥å£**ï¼š`GET /orders/{orderId}/reminders`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "orderId": "o1",
    "finalPaymentAmount": 1500,
    "notifiedAt": "2023-11-01T00:00:00Z",
    "daysSinceNotified": 25,
    "reminders": [
      {
        "id": "r1",
        "type": "first",
        "channel": "sms",
        "sentAt": "2023-11-04T09:00:00Z",
        "status": "sent"
      },
      {
        "id": "r2",
        "type": "second",
        "channel": "wechat",
        "sentAt": "2023-11-08T09:00:00Z",
        "status": "sent"
      }
    ],
    "nextReminderAt": "2023-11-16T09:00:00Z",
    "blacklistWarning": "è¿˜æœ‰5å¤©å°†åŠ å…¥é»‘åå•"
  }
}
```

---

#### 3.17.2 æ‰‹åŠ¨è§¦å‘å‚¬æ¬¾

**æ¥å£**ï¼š`POST /orders/{orderId}/send-reminder`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "channel": "sms",
  "message": "è‡ªå®šä¹‰å‚¬æ¬¾æ¶ˆæ¯"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å‚¬æ¬¾é€šçŸ¥å·²å‘é€"
}
```

---

### 3.18 é»‘åå•æ¨¡å— â­ æ–°å¢

#### 3.18.1 æŸ¥è¯¢é»‘åå•

**æ¥å£**ï¼š`GET /blacklist`

**è¯·æ±‚å‚æ•°**ï¼š
```
page: 1
pageSize: 20
keyword: æœç´¢ç”¨æˆ·å/æ‰‹æœºå·
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "total": 50,
    "list": [
      {
        "id": "bl1",
        "userId": "u10",
        "userName": "è·‘å•ç”¨æˆ·",
        "phone": "139****1234",
        "reason": "å°¾æ¬¾è¶…æœŸ30å¤©æœªæ”¯ä»˜",
        "orderId": "o20",
        "orderAmount": 2000,
        "ownedAmount": 1500,
        "addedBy": "l1",
        "addedAt": "2023-11-30T00:00:00Z",
        "canRemoveAfter": "2024-01-30T00:00:00Z"
      }
    ]
  }
}
```

---

#### 3.18.2 æ·»åŠ åˆ°é»‘åå•

**æ¥å£**ï¼š`POST /blacklist`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "userId": "u10",
  "reason": "å°¾æ¬¾è¶…æœŸ30å¤©æœªæ”¯ä»˜",
  "orderId": "o20",
  "ownedAmount": 1500
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å·²åŠ å…¥é»‘åå•"
}
```

---

#### 3.18.3 è§£é™¤é»‘åå•

**æ¥å£**ï¼š`DELETE /blacklist/{userId}`

**è¯´æ˜**ï¼šç”¨æˆ·è¡¥é½æ¬ æ¬¾åè‡ªåŠ¨è§£é™¤

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "å·²è§£é™¤é»‘åå•é™åˆ¶"
}
```

---

---

## å››ã€Mockæ•°æ®

### 4.1 ç”¨æˆ·æ•°æ®

```javascript
// src/data/mock.js

export const ROLES = {
  MERCHANT: 'merchant',
  USER: 'user',
  LEADER: 'leader',
};

export const USERS = [
  {
    id: 'u1',
    name: 'æ˜¯å…”å…”å‘€',
    role: ROLES.USER,
    avatar: 'bg-rose-200',
    phone: '138****8000',
    email: 'user1@example.com',
    balance: 5000,
    creditScore: 90,
    isRealName: false,
    followers: 342,
    following: 56,
    likes: 1205,
    createTime: '2023-01-01'
  },
  {
    id: 'u2',
    name: 'åƒåœŸå°‘å¥³B',
    role: ROLES.USER,
    avatar: 'bg-blue-200',
    balance: 200,
    creditScore: 85,
    isRealName: true
  },
  {
    id: 'l1',
    name: 'çŸ¥åå›¢é•¿A',
    role: ROLES.LEADER,
    avatar: 'bg-yellow-200',
    balance: 10000,
    creditScore: 95,
    isRealName: true,
    followers: 1250,
    rating: 4.9
  },
  {
    id: 'm1',
    name: 'çˆ±ä¸½ä¸çš„è¡£æ©±',
    role: ROLES.MERCHANT,
    avatar: 'bg-purple-200',
    balance: 50000,
    isRealName: true
  },
];
```

---

### 4.2 åˆ†ç±»é…ç½®

```javascript
export const CATEGORY_CONFIG = {
  SIZES: [
    { id: 'all', label: 'å…¨éƒ¨å°ºå¯¸' },
    { id: 'uncle', label: 'å”' },
    { id: '1/3', label: 'ä¸‰åˆ†' },
    { id: '1/4', label: 'å››åˆ†' },
    { id: '1/6', label: 'å…­åˆ†' },
    { id: '1/8', label: 'å…«åˆ†' },
    { id: '1/12', label: 'OB11/12åˆ†' },
  ],
  TYPES: [
    { id: 'all', label: 'å…¨éƒ¨' },
    { id: 'full', label: 'æ•´å¨ƒ' },
    { id: 'body', label: 'ç´ ä½“' },
    { id: 'head', label: 'å•å¤´' },
    { id: 'outfit', label: 'å¨ƒè¡£' },
    { id: 'wig', label: 'å‡å‘' },
    { id: 'eyes', label: 'çœ¼ç ' },
    { id: 'shoes', label: 'é‹å­' },
    { id: 'props', label: 'é“å…·' },
  ]
};
```

---

### 4.3 å•†å“æ•°æ®

```javascript
export const MOCK_PRODUCTS = [
  {
    id: 1,
    title: 'ã€ç°è´§ã€‘ä¸‰åˆ†BJD æ´›ä¸½å¡”å®«å»·é£æ´‹è£… "è”·è–‡å°‘å¥³"',
    price: 328,
    image: 'bg-pink-100',
    shop: 'çˆ±ä¸½ä¸çš„è¡£æ©±',
    shopId: 'm1',
    tags: ['ä¸‰åˆ†', 'æ´‹è£…'],
    size: '1/3',
    category: 'outfit',
    type: 'spot', // spot | groupbuy
    stock: 50,
    sales: 120,
    rating: 4.8
  },
  {
    id: 2,
    title: 'ã€é™æ—¶ã€‘å››åˆ†é€šç”¨ ä¼‘é—²å«è¡£å¥—è£… å¤šè‰²å¯é€‰',
    price: 89,
    image: 'bg-blue-100',
    shop: 'çˆ±ä¸½ä¸çš„è¡£æ©±',
    shopId: 'm1',
    tags: ['å››åˆ†', 'ä¼‘é—²'],
    size: '1/4',
    category: 'outfit',
    type: 'spot',
    stock: 100
  },
  // ... æ›´å¤šå•†å“
];
```

---

### 4.4 å›¢è´­æ•°æ®

```javascript
export const MOCK_GROUP_BUYS = [
  {
    id: 101,
    title: 'ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“',
    status: 'å¾é›†ä¸­',
    progress: 75,
    leader: 'çŸ¥åå›¢é•¿A',
    leaderId: 'l1',
    price: 1500,
    deposit: 500,
    finalPayment: 1000,
    deadline: '2024-01-15T23:59:59Z',
    image: 'bg-purple-100',
    images: [
      'bg-purple-100',
      'bg-purple-200',
      'bg-purple-300'
    ],
    description: 'é¹¿ç¥ç‰¹ä½“äºŒæ ·ä¿®æ”¹å®Œæ¯•ï¼Œå¢åŠ äº†å¯åŠ¨æ€§ï¼Œå…³èŠ‚æ›´åŠ é¡ºæ»‘ã€‚é€‚åˆä¸‰åˆ†ä½“ï¼Œé«˜åº¦çº¦60cmã€‚',
    skus: [
      { id: 's1', name: 'ç™½è‚Œ', price: 1500, stock: 50 },
      { id: 's2', name: 'æ™®è‚Œ', price: 1500, stock: 50 },
      { id: 's3', name: 'çƒ§è‚Œ', price: 1600, stock: 30 },
    ],
    participants: 25,
    views: 1250,
    likes: 102,
    comments: 45,
    createTime: '2023-12-01T10:00:00Z'
  },
  {
    id: 102,
    title: 'ã€å¤§è´§è¿›åº¦ã€‘å…­åˆ†BJD "å°å°å…”" å°¾æ¬¾è¡¥æ¬¾é€šçŸ¥',
    status: 'è¡¥æ¬¾ä¸­',
    progress: 100,
    leader: 'çŸ¥åå›¢é•¿A',
    leaderId: 'l1',
    price: 800,
    deposit: 300,
    finalPayment: 500,
    deadline: 'è¯·å°½å¿«è¡¥æ¬¾',
    image: 'bg-yellow-100',
    description: 'å°å°å…”å¤§è´§å·²å‡ºï¼Œè¯·å„ä½å®¶é•¿å°½å¿«è¡¥æ¬¾ã€‚',
    skus: [
      { id: 's4', name: 'å…¨å¥—', price: 800, stock: 30 },
    ],
    participants: 20,
    createTime: '2023-11-01T10:00:00Z'
  },
];
```

---

### 4.5 è®¢å•çŠ¶æ€

```javascript
export const ORDER_STATUS = {
  UNPAID_DEPOSIT: 'unpaid_deposit',     // å¾…ä»˜å®šé‡‘
  WAIT_VERIFY: 'wait_verify',           // å¾…å®¡æ ¸
  PRODUCTION: 'production',             // åˆ¶ä½œä¸­
  WAIT_FINAL: 'wait_final',             // å¾…ä»˜å°¾æ¬¾
  WAIT_SHIP: 'wait_ship',               // å¾…å‘è´§
  SHIPPED: 'shipped',                   // å·²å‘è´§
  COMPLETED: 'completed',               // å·²å®Œæˆ
  TRANSFERRED: 'transferred',           // å·²è½¬å•
};
```

---

### 4.6 è®¢å•æ•°æ®

```javascript
export const MOCK_ORDERS = [
  {
    id: 'o1',
    userId: 'u1',
    groupBuyId: 101,
    skuId: 's1',
    skuName: 'ç™½è‚Œ',
    price: 1500,
    deposit: 500,
    paidDeposit: 500,
    finalPayment: 1000,
    paidFinal: 0,
    status: ORDER_STATUS.PRODUCTION,
    contractId: 'CT-o1',
    addressId: 1,
    createTime: '2023-10-01T10:00:00Z',
    paidDepositTime: '2023-10-01T10:05:00Z',
    verifiedTime: '2023-10-01T11:00:00Z',
    image: 'bg-purple-100',
    title: 'ã€äºŒæ ·å¾é›†ã€‘åŸåˆ›ç‰¹ä½“ "é¹¿ç¥" æ ‘è„‚ç´ ä½“',
    leader: 'çŸ¥åå›¢é•¿A',
    shipping: {
      trackingNumber: '',
      company: '',
      shippedAt: null
    }
  },
];
```

---

### 4.7 åœ°å€æ•°æ®

```javascript
export const MOCK_ADDRESSES = [
  {
    id: 1,
    userId: 'u1',
    name: 'å¼ ä¸‰',
    phone: '13800138000',
    province: 'åŒ—äº¬å¸‚',
    city: 'åŒ—äº¬å¸‚',
    district: 'æœé˜³åŒº',
    address: 'å»ºå›½è·¯88å·',
    isDefault: true
  },
  {
    id: 2,
    userId: 'u1',
    name: 'æå››',
    phone: '13900139000',
    province: 'ä¸Šæµ·å¸‚',
    city: 'ä¸Šæµ·å¸‚',
    district: 'æµ¦ä¸œæ–°åŒº',
    address: 'é™†å®¶å˜´ç¯è·¯1å·',
    isDefault: false
  },
];
```

---

### 4.8 åŠ¨æ€æ•°æ®

```javascript
export const MOCK_POSTS = [
  {
    id: 201,
    userId: 'u1',
    user: {
      id: 'u1',
      name: 'å…»å¨ƒå¤§æˆ·',
      avatar: 'bg-red-200',
      isVerified: true,
      tags: ['èµ„æ·±ç©å®¶']
    },
    content: 'ç»ˆäºç­‰åˆ°æˆ‘çš„å°å¯çˆ±å›å®¶äº†ï¼è¿™ç§è‚¤è‰²çœŸçš„ç»ç¾ï¼Œè‡ªç„¶å…‰ä¸‹é€šé€æ„Ÿæ»¡åˆ†ã€‚ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼Œçœ‹åˆ°å®ç‰©çš„é‚£ä¸€åˆ»çœŸçš„è¶…çº§æ„ŸåŠ¨ï¼å·¥å‚çš„åšå·¥éå¸¸ç²¾ç»†ï¼Œå…³èŠ‚ä¹Ÿå¾ˆé¡ºæ»‘ã€‚å¼ºçƒˆæ¨èè¿™ä¸ªå¨ƒç¤¾ï¼ #BJD #ç§å…»å›¾ #ä¸‰åˆ†å¨ƒ',
    images: [
      'bg-orange-100',
      'bg-pink-100',
      'bg-purple-100'
    ],
    tags: ['BJD', 'ç§å…»å›¾', 'ä¸‰åˆ†å¨ƒ'],
    likes: 124,
    comments: 32,
    shares: 8,
    isLiked: false,
    distance: '1.2km',
    createTime: '2023-12-08T08:00:00Z'
  },
  {
    id: 202,
    userId: 'u2',
    user: {
      id: 'u2',
      name: 'æ‰‹ä½œå¨˜å°B',
      avatar: 'bg-green-200',
      isVerified: true,
      tags: ['æ‰‹ä½œå¨˜']
    },
    content: 'æ–°åšçš„å°è£™å­ï¼Œè¿˜åœ¨æ‰“ç‰ˆä¸­ï¼Œå¤§å®¶å–œæ¬¢é•¿æ¬¾è¿˜æ˜¯çŸ­æ¬¾ï¼Ÿåœ¨çº¿è¹²ä¸€ä¸ªå»ºè®®~',
    images: ['bg-teal-100'],
    tags: ['æ‰‹ä½œ', 'å¨ƒè¡£'],
    likes: 88,
    comments: 45,
    isLiked: false,
    distance: '500m',
    createTime: '2023-12-08T07:00:00Z'
  },
];
```

---

### 4.9 è¯„è®ºæ•°æ®

```javascript
export const MOCK_COMMENTS = [
  {
    id: 1,
    postId: 201,
    userId: 'u2',
    user: {
      id: 'u2',
      name: 'æ‰‹ä½œå¨˜å°B',
      avatar: 'bg-green-200'
    },
    content: 'å¤ªç¾äº†ï¼æ±‚é“¾æ¥ï¼',
    likes: 5,
    createTime: '2023-12-08T09:00:00Z',
    replyTo: null,
    replies: []
  },
  {
    id: 2,
    postId: 201,
    userId: 'l1',
    user: {
      id: 'l1',
      name: 'æ‘„å½±å¸ˆC',
      avatar: 'bg-blue-200'
    },
    content: 'è¿™ä¸ªè‚¤è‰²ç¡®å®ç»äº†ï¼Œæ‹ç…§æ•ˆæœä¸€å®šå¾ˆå¥½',
    likes: 3,
    createTime: '2023-12-08T09:30:00Z',
    replyTo: null,
    replies: []
  },
];
```

---

### 4.10 å¨ƒå¨ƒæ¡£æ¡ˆæ•°æ® â­ æ–°å¢

```javascript
export const MOCK_DOLLS = [
  {
    id: 'd1',
    userId: 'u1',
    name: 'å°é¹¿',
    brand: 'è‡ªåˆ¶ç‰¹ä½“',
    size: '1/3',
    skinColor: 'ç™½è‚Œ',
    birthday: '2023-10-15',
    weight: 200,
    height: 60,
    eyeColor: 'è“è‰²',
    wigColor: 'é‡‘è‰²',
    makeup: 'åŸå‚å¦†',
    mainImage: 'bg-purple-100',
    images: ['bg-purple-100', 'bg-purple-200', 'bg-purple-300', 'bg-purple-50'],
    orderId: 'o1',
    contractId: 'CT-o1',
    outfitCount: 12,
    photoCount: 89,
    daysOwned: 54,
    notes: 'æˆ‘çš„ç¬¬ä¸€åªå¨ƒï¼Œéå¸¸çæƒœ',
    maintenanceRecords: [
      {
        id: 'mr1',
        date: '2023-11-20',
        type: 'æ¸…æ´ä¿å…»',
        note: 'å…¨èº«æ¸…æ´ï¼Œå…³èŠ‚ä¸Šæ²¹',
        images: [],
        createTime: '2023-11-20T00:00:00Z'
      },
      {
        id: 'mr2',
        date: '2023-12-01',
        type: 'ç»´ä¿®',
        note: 'å·¦æ‰‹å…³èŠ‚æ¾åŠ¨ï¼Œå·²åŠ ç´§',
        images: [],
        createTime: '2023-12-01T00:00:00Z'
      }
    ],
    createTime: '2023-10-15T00:00:00Z',
    updateTime: '2023-12-01T00:00:00Z'
  },
  {
    id: 'd2',
    userId: 'u1',
    name: 'å°å…”',
    brand: 'Ringdoll',
    size: '1/4',
    skinColor: 'ç²‰è‚Œ',
    birthday: '2023-11-20',
    weight: 150,
    height: 45,
    eyeColor: 'æ£•è‰²',
    wigColor: 'æ —è‰²',
    makeup: 'è‡ªå¦†',
    mainImage: 'bg-pink-100',
    images: ['bg-pink-100', 'bg-pink-200'],
    orderId: 'o2',
    contractId: 'CT-o2',
    outfitCount: 8,
    photoCount: 45,
    daysOwned: 18,
    notes: 'è¶…çº§å¯çˆ±çš„å°å…”å­',
    maintenanceRecords: [],
    createTime: '2023-11-20T00:00:00Z',
    updateTime: '2023-11-20T00:00:00Z'
  },
  {
    id: 'd3',
    userId: 'u1',
    name: 'å°ç†Š',
    brand: 'VOLKS',
    size: '1/6',
    skinColor: 'æ™®è‚Œ',
    birthday: '2023-12-01',
    weight: 80,
    height: 30,
    eyeColor: 'é»‘è‰²',
    wigColor: 'é»‘è‰²',
    makeup: 'åŸå‚å¦†',
    mainImage: 'bg-yellow-100',
    images: ['bg-yellow-100'],
    orderId: 'o3',
    contractId: 'CT-o3',
    outfitCount: 5,
    photoCount: 12,
    daysOwned: 7,
    notes: 'æœ€æ–°å…¥æ‰‹çš„å°å¯çˆ±',
    maintenanceRecords: [],
    createTime: '2023-12-01T00:00:00Z',
    updateTime: '2023-12-01T00:00:00Z'
  }
];
```

---

### 4.11 æˆå°±æ•°æ® â­ æ–°å¢

```javascript
export const MOCK_ACHIEVEMENTS = [
  {
    id: 'newbie_badge',
    category: 'æ–°æ‰‹æˆå°±',
    name: 'å…¥å‘å¾½ç« ',
    description: 'å®Œæˆé¦–æ¬¡å‚å›¢',
    icon: 'ğŸ‰',
    progress: 1,
    required: 1,
    reward: {
      badge: true,
      coupon: 10,
      credit: 5
    },
    unlocked: true,
    unlockedAt: '2023-10-01',
    rarity: 1,
    totalUnlocked: 12450
  },
  {
    id: 'real_name',
    category: 'æ–°æ‰‹æˆå°±',
    name: 'å®åç©å®¶',
    description: 'å®Œæˆå®åè®¤è¯',
    icon: 'ğŸ“',
    progress: 0,
    required: 1,
    reward: {
      badge: true,
      credit: 10
    },
    unlocked: false,
    unlockedAt: null,
    rarity: 1,
    totalUnlocked: 8230
  },
  {
    id: 'shopaholic',
    category: 'è´­ç‰©æˆå°±',
    name: 'å‰æ‰‹ç‹',
    description: 'å‚ä¸5æ¬¡å›¢è´­',
    icon: 'ğŸ›ï¸',
    progress: 2,
    required: 5,
    reward: {
      badge: true,
      coupon: 50,
      credit: 15
    },
    unlocked: false,
    unlockedAt: null,
    rarity: 2,
    totalUnlocked: 3456
  },
  {
    id: 'rich',
    category: 'è´­ç‰©æˆå°±',
    name: 'å£•æ— äººæ€§',
    description: 'ç´¯è®¡æ¶ˆè´¹10,000å…ƒ',
    icon: 'ğŸ’',
    progress: 2500,
    required: 10000,
    reward: {
      badge: true,
      coupon: 200,
      credit: 30
    },
    unlocked: false,
    unlockedAt: null,
    rarity: 3,
    totalUnlocked: 567
  },
  {
    id: 'social_butterfly',
    category: 'ç¤¾äº¤æˆå°±',
    name: 'æ™’å›¾è¾¾äºº',
    description: 'å‘å¸ƒ10æ¡åŠ¨æ€',
    icon: 'ğŸ“¸',
    progress: 0,
    required: 10,
    reward: {
      badge: true,
      coupon: 20,
      credit: 10
    },
    unlocked: false,
    unlockedAt: null,
    rarity: 2,
    totalUnlocked: 2345
  },
  {
    id: 'popular',
    category: 'ç¤¾äº¤æˆå°±',
    name: 'äººæ°”ç‹',
    description: 'è·å¾—100ä¸ªèµ',
    icon: 'â¤ï¸',
    progress: 0,
    required: 100,
    reward: {
      badge: true,
      coupon: 30,
      credit: 15
    },
    unlocked: false,
    unlockedAt: null,
    rarity: 2,
    totalUnlocked: 1890
  }
];
```

---

### 4.12 çŸ¥è¯†åº“æ•°æ® â­ æ–°å¢

```javascript
export const MOCK_KNOWLEDGE_ARTICLES = [
  {
    id: 1,
    category: 'æ–°æ‰‹æŒ‡å—',
    title: 'BJDå…¥é—¨æŒ‡å—ï¼šä»€ä¹ˆæ˜¯BJDï¼Ÿ',
    summary: 'è¯¦ç»†ä»‹ç»BJDçš„å†å²ã€åˆ†ç±»ã€å°ºå¯¸ç­‰åŸºç¡€çŸ¥è¯†',
    coverImage: 'bg-blue-100',
    author: {
      id: 'admin',
      name: 'å®˜æ–¹ç¼–è¾‘',
      avatar: 'bg-gray-400'
    },
    type: 'article',
    difficulty: 'å…¥é—¨',
    readTime: 5,
    views: 12500,
    likes: 450,
    tags: ['æ–°æ‰‹å¿…è¯»', 'åŸºç¡€çŸ¥è¯†'],
    createTime: '2023-01-01T00:00:00Z',
    updateTime: '2023-12-01T00:00:00Z'
  },
  {
    id: 2,
    category: 'æ–°æ‰‹æŒ‡å—',
    title: 'å¦‚ä½•é€‰æ‹©ç¬¬ä¸€åªå¨ƒå¨ƒï¼Ÿ',
    summary: 'ä»é¢„ç®—ã€å°ºå¯¸ã€é£æ ¼ç­‰è§’åº¦åˆ†æå¦‚ä½•é€‰è´­ç¬¬ä¸€åªå¨ƒå¨ƒ',
    coverImage: 'bg-purple-100',
    author: {
      id: 'admin',
      name: 'å®˜æ–¹ç¼–è¾‘',
      avatar: 'bg-gray-400'
    },
    type: 'article',
    difficulty: 'å…¥é—¨',
    readTime: 8,
    views: 10300,
    likes: 380,
    tags: ['æ–°æ‰‹å¿…è¯»', 'è´­ä¹°å»ºè®®'],
    createTime: '2023-01-05T00:00:00Z',
    updateTime: '2023-11-15T00:00:00Z'
  },
  {
    id: 3,
    category: 'å“ç‰Œå¤§å…¨',
    title: 'å›½äº§BJDå“ç‰Œå…¨è§£æ',
    summary: 'Ringdollã€DollZoneã€ASã€GEMç­‰å›½äº§å“ç‰Œä»‹ç»',
    coverImage: 'bg-red-100',
    author: {
      id: 'admin',
      name: 'å®˜æ–¹ç¼–è¾‘',
      avatar: 'bg-gray-400'
    },
    type: 'article',
    difficulty: 'è¿›é˜¶',
    readTime: 12,
    views: 8900,
    likes: 310,
    tags: ['å›½äº§å“ç‰Œ', 'å“ç‰Œå¯¹æ¯”'],
    createTime: '2023-02-01T00:00:00Z',
    updateTime: '2023-11-20T00:00:00Z'
  },
  {
    id: 4,
    category: 'é¿å‘æŒ‡å—',
    title: 'å¦‚ä½•è¯†åˆ«å‡å¨ƒï¼Ÿ',
    summary: 'ä»å‡ºç”Ÿè¯ã€åšå·¥ã€ä»·æ ¼ç­‰æ–¹é¢è¾¨åˆ«çœŸå‡å¨ƒå¨ƒ',
    coverImage: 'bg-orange-100',
    author: {
      id: 'admin',
      name: 'å®˜æ–¹ç¼–è¾‘',
      avatar: 'bg-gray-400'
    },
    type: 'article',
    difficulty: 'è¿›é˜¶',
    readTime: 10,
    views: 18500,
    likes: 680,
    tags: ['é˜²ä¼ª', 'é¿å‘'],
    createTime: '2023-03-01T00:00:00Z',
    updateTime: '2023-12-01T00:00:00Z'
  },
  {
    id: 5,
    category: 'ä¿å…»æ•™ç¨‹',
    title: 'å¨ƒå¨ƒå…³èŠ‚æ¾äº†æ€ä¹ˆåŠï¼Ÿ',
    summary: 'æ‰‹æŠŠæ‰‹æ•™ä½ ç»™å¨ƒå¨ƒå…³èŠ‚åŠ ç´§ã€ä¸Šæ²¹ã€ç»´æŠ¤',
    coverImage: 'bg-green-100',
    author: {
      id: 'admin',
      name: 'å®˜æ–¹ç¼–è¾‘',
      avatar: 'bg-gray-400'
    },
    type: 'video',
    difficulty: 'è¿›é˜¶',
    readTime: 15,
    views: 11200,
    likes: 420,
    tags: ['ä¿å…»', 'ç»´ä¿®', 'è§†é¢‘æ•™ç¨‹'],
    createTime: '2023-04-01T00:00:00Z',
    updateTime: '2023-11-25T00:00:00Z'
  }
];

export const MOCK_KNOWLEDGE_QUESTIONS = [
  {
    id: 1,
    question: 'ä¸‰åˆ†å’Œå››åˆ†å“ªä¸ªæ›´é€‚åˆæ–°æ‰‹ï¼Ÿ',
    asker: {
      id: 'u1',
      name: 'æ–°æ‰‹å°ç™½',
      avatar: 'bg-rose-200'
    },
    answerCount: 23,
    views: 3400,
    bestAnswer: {
      id: 'a1',
      content: 'å»ºè®®ä»å››åˆ†å¼€å§‹ï¼Œå°ºå¯¸é€‚ä¸­ï¼Œä»·æ ¼ç›¸å¯¹è¾ƒä½ï¼Œè¡£æœå’Œé“å…·ä¹Ÿæ¯”è¾ƒå¥½ä¹°ã€‚ä¸‰åˆ†å¤ªå¤§äº†ï¼Œå¯¹æ–°æ‰‹æ¥è¯´å¯èƒ½ä¸å¤ªå¥½é©¾é©­ã€‚',
      author: {
        id: 'l1',
        name: 'èµ„æ·±ç©å®¶',
        avatar: 'bg-yellow-200'
      },
      likes: 56,
      createTime: '2023-11-01T00:00:00Z'
    },
    tags: ['å°ºå¯¸é€‰æ‹©', 'æ–°æ‰‹æŒ‡å—'],
    createTime: '2023-10-28T00:00:00Z'
  },
  {
    id: 2,
    question: 'å¦‚ä½•é€‰æ‹©å¨ƒå¨ƒçš„è‚¤è‰²ï¼Ÿ',
    asker: {
      id: 'u2',
      name: 'åƒåœŸå°‘å¥³',
      avatar: 'bg-blue-200'
    },
    answerCount: 18,
    views: 2800,
    tags: ['è‚¤è‰²é€‰æ‹©'],
    createTime: '2023-11-05T00:00:00Z'
  },
  {
    id: 3,
    question: 'å›¢è´­ä¸€èˆ¬è¦ç­‰å¤šä¹…ï¼Ÿ',
    asker: {
      id: 'u1',
      name: 'æ–°æ‰‹å°ç™½',
      avatar: 'bg-rose-200'
    },
    answerCount: 35,
    views: 5200,
    tags: ['å›¢è´­', 'å·¥æœŸ'],
    createTime: '2023-11-10T00:00:00Z'
  }
];
```

---

---

## äº”ã€æ•°æ®åº“è®¾è®¡ï¼ˆå‚è€ƒï¼‰

### 5.1 æ ¸å¿ƒè¡¨ç»“æ„

#### users - ç”¨æˆ·è¡¨
```sql
CREATE TABLE users (
  id VARCHAR(50) PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  nickname VARCHAR(100),
  role ENUM('user', 'leader', 'merchant') NOT NULL,
  avatar VARCHAR(255),
  bio TEXT,
  phone VARCHAR(20) UNIQUE,
  email VARCHAR(100),
  password VARCHAR(255),
  balance DECIMAL(10, 2) DEFAULT 0,
  credit_score INT DEFAULT 80,
  is_real_name BOOLEAN DEFAULT FALSE,
  real_name VARCHAR(100),
  id_number VARCHAR(18),
  followers INT DEFAULT 0,
  following INT DEFAULT 0,
  likes INT DEFAULT 0,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_phone (phone),
  INDEX idx_role (role)
);
```

#### group_buys - å›¢è´­è¡¨
```sql
CREATE TABLE group_buys (
  id INT AUTO_INCREMENT PRIMARY KEY,
  leader_id VARCHAR(50) NOT NULL,
  title VARCHAR(255) NOT NULL,
  status ENUM('å¾é›†ä¸­', 'åˆ¶ä½œä¸­', 'è¡¥æ¬¾ä¸­', 'å‘è´§ä¸­', 'å·²ç»“æŸ') DEFAULT 'å¾é›†ä¸­',
  progress INT DEFAULT 0,
  price DECIMAL(10, 2) NOT NULL,
  deposit DECIMAL(10, 2) NOT NULL,
  deadline TIMESTAMP,
  description TEXT,
  images JSON,
  participants INT DEFAULT 0,
  views INT DEFAULT 0,
  likes INT DEFAULT 0,
  comments INT DEFAULT 0,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (leader_id) REFERENCES users(id),
  INDEX idx_leader (leader_id),
  INDEX idx_status (status)
);
```

#### group_buy_skus - å›¢è´­SKUè¡¨
```sql
CREATE TABLE group_buy_skus (
  id VARCHAR(50) PRIMARY KEY,
  group_buy_id INT NOT NULL,
  name VARCHAR(100) NOT NULL,
  price DECIMAL(10, 2) NOT NULL,
  stock INT DEFAULT 0,
  FOREIGN KEY (group_buy_id) REFERENCES group_buys(id) ON DELETE CASCADE,
  INDEX idx_group_buy (group_buy_id)
);
```

#### orders - è®¢å•è¡¨
```sql
CREATE TABLE orders (
  id VARCHAR(50) PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL,
  group_buy_id INT NOT NULL,
  sku_id VARCHAR(50) NOT NULL,
  sku_name VARCHAR(100) NOT NULL,
  price DECIMAL(10, 2) NOT NULL,
  deposit DECIMAL(10, 2) NOT NULL,
  paid_deposit DECIMAL(10, 2) DEFAULT 0,
  final_payment DECIMAL(10, 2) NOT NULL,
  paid_final DECIMAL(10, 2) DEFAULT 0,
  status ENUM('unpaid_deposit', 'wait_verify', 'production', 'wait_final', 'wait_ship', 'shipped', 'completed', 'transferred') NOT NULL,
  contract_id VARCHAR(50),
  address_id INT,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  paid_deposit_time TIMESTAMP NULL,
  verified_time TIMESTAMP NULL,
  paid_final_time TIMESTAMP NULL,
  shipped_time TIMESTAMP NULL,
  completed_time TIMESTAMP NULL,
  tracking_number VARCHAR(100),
  shipping_company VARCHAR(100),
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (group_buy_id) REFERENCES group_buys(id),
  INDEX idx_user (user_id),
  INDEX idx_group_buy (group_buy_id),
  INDEX idx_status (status)
);
```

#### addresses - åœ°å€è¡¨
```sql
CREATE TABLE addresses (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL,
  name VARCHAR(100) NOT NULL,
  phone VARCHAR(20) NOT NULL,
  province VARCHAR(50) NOT NULL,
  city VARCHAR(50) NOT NULL,
  district VARCHAR(50) NOT NULL,
  address VARCHAR(255) NOT NULL,
  is_default BOOLEAN DEFAULT FALSE,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  INDEX idx_user (user_id)
);
```

#### contracts - åˆåŒè¡¨
```sql
CREATE TABLE contracts (
  id VARCHAR(50) PRIMARY KEY,
  order_id VARCHAR(50) NOT NULL UNIQUE,
  user_id VARCHAR(50) NOT NULL,
  content TEXT NOT NULL,
  signature VARCHAR(255),
  status ENUM('pending', 'signed', 'expired') DEFAULT 'pending',
  signed_at TIMESTAMP NULL,
  contract_url VARCHAR(255),
  FOREIGN KEY (order_id) REFERENCES orders(id),
  FOREIGN KEY (user_id) REFERENCES users(id),
  INDEX idx_user (user_id),
  INDEX idx_order (order_id)
);
```

#### transfer_codes - è½¬å•ç è¡¨
```sql
CREATE TABLE transfer_codes (
  code VARCHAR(50) PRIMARY KEY,
  order_id VARCHAR(50) NOT NULL,
  seller_id VARCHAR(50) NOT NULL,
  expire_time TIMESTAMP NOT NULL,
  is_used BOOLEAN DEFAULT FALSE,
  used_at TIMESTAMP NULL,
  buyer_id VARCHAR(50),
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (order_id) REFERENCES orders(id),
  FOREIGN KEY (seller_id) REFERENCES users(id),
  FOREIGN KEY (buyer_id) REFERENCES users(id),
  INDEX idx_order (order_id),
  INDEX idx_expire (expire_time)
);
```

#### posts - åŠ¨æ€è¡¨
```sql
CREATE TABLE posts (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL,
  content TEXT NOT NULL,
  images JSON,
  tags JSON,
  likes INT DEFAULT 0,
  comments INT DEFAULT 0,
  shares INT DEFAULT 0,
  views INT DEFAULT 0,
  latitude DECIMAL(10, 8),
  longitude DECIMAL(11, 8),
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  INDEX idx_user (user_id),
  INDEX idx_create_time (create_time)
);
```

#### comments - è¯„è®ºè¡¨
```sql
CREATE TABLE comments (
  id INT AUTO_INCREMENT PRIMARY KEY,
  post_id INT NOT NULL,
  user_id VARCHAR(50) NOT NULL,
  content TEXT NOT NULL,
  likes INT DEFAULT 0,
  reply_to INT NULL,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (post_id) REFERENCES posts(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (reply_to) REFERENCES comments(id) ON DELETE SET NULL,
  INDEX idx_post (post_id),
  INDEX idx_user (user_id)
);
```

#### follows - å…³æ³¨è¡¨
```sql
CREATE TABLE follows (
  follower_id VARCHAR(50) NOT NULL,
  followee_id VARCHAR(50) NOT NULL,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (follower_id, followee_id),
  FOREIGN KEY (follower_id) REFERENCES users(id),
  FOREIGN KEY (followee_id) REFERENCES users(id),
  INDEX idx_follower (follower_id),
  INDEX idx_followee (followee_id)
);
```

#### notifications - é€šçŸ¥è¡¨
```sql
CREATE TABLE notifications (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL,
  type ENUM('system', 'comment', 'like', 'follow') NOT NULL,
  title VARCHAR(255) NOT NULL,
  content TEXT,
  related_id VARCHAR(50),
  related_type VARCHAR(50),
  is_read BOOLEAN DEFAULT FALSE,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  INDEX idx_user (user_id),
  INDEX idx_is_read (is_read)
);
```

---

#### dolls - å¨ƒå¨ƒæ¡£æ¡ˆè¡¨ â­ æ–°å¢
```sql
CREATE TABLE dolls (
  id VARCHAR(50) PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL,
  name VARCHAR(100) NOT NULL,
  brand VARCHAR(100),
  size VARCHAR(20),
  skin_color VARCHAR(50),
  birthday DATE,
  weight INT,
  height INT,
  eye_color VARCHAR(50),
  wig_color VARCHAR(50),
  makeup VARCHAR(100),
  main_image VARCHAR(255),
  images JSON,
  order_id VARCHAR(50),
  contract_id VARCHAR(50),
  outfit_count INT DEFAULT 0,
  photo_count INT DEFAULT 0,
  notes TEXT,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (order_id) REFERENCES orders(id),
  INDEX idx_user (user_id),
  INDEX idx_birthday (birthday)
);
```

---

#### maintenance_records - å¨ƒå¨ƒä¿å…»è®°å½•è¡¨ â­ æ–°å¢
```sql
CREATE TABLE maintenance_records (
  id VARCHAR(50) PRIMARY KEY,
  doll_id VARCHAR(50) NOT NULL,
  date DATE NOT NULL,
  type VARCHAR(50) NOT NULL,
  note TEXT,
  images JSON,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (doll_id) REFERENCES dolls(id) ON DELETE CASCADE,
  INDEX idx_doll (doll_id),
  INDEX idx_date (date)
);
```

---

#### achievements - æˆå°±è¡¨ â­ æ–°å¢
```sql
CREATE TABLE achievements (
  id VARCHAR(50) PRIMARY KEY,
  category VARCHAR(50) NOT NULL,
  name VARCHAR(100) NOT NULL,
  description VARCHAR(255),
  icon VARCHAR(10),
  required INT DEFAULT 1,
  rarity INT DEFAULT 1,
  reward_badge BOOLEAN DEFAULT FALSE,
  reward_coupon INT DEFAULT 0,
  reward_credit INT DEFAULT 0,
  total_unlocked INT DEFAULT 0,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_category (category),
  INDEX idx_rarity (rarity)
);
```

---

#### user_achievements - ç”¨æˆ·æˆå°±è¡¨ â­ æ–°å¢
```sql
CREATE TABLE user_achievements (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL,
  achievement_id VARCHAR(50) NOT NULL,
  progress INT DEFAULT 0,
  unlocked BOOLEAN DEFAULT FALSE,
  unlocked_at TIMESTAMP NULL,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (achievement_id) REFERENCES achievements(id),
  UNIQUE KEY uk_user_achievement (user_id, achievement_id),
  INDEX idx_user (user_id),
  INDEX idx_unlocked (unlocked)
);
```

---

#### knowledge_articles - çŸ¥è¯†åº“æ–‡ç« è¡¨ â­ æ–°å¢
```sql
CREATE TABLE knowledge_articles (
  id INT AUTO_INCREMENT PRIMARY KEY,
  category VARCHAR(50) NOT NULL,
  title VARCHAR(255) NOT NULL,
  summary TEXT,
  content LONGTEXT,
  content_html LONGTEXT,
  cover_image VARCHAR(255),
  images JSON,
  video_url VARCHAR(255),
  author_id VARCHAR(50) NOT NULL,
  type ENUM('article', 'video') DEFAULT 'article',
  difficulty ENUM('å…¥é—¨', 'è¿›é˜¶', 'é«˜çº§') DEFAULT 'å…¥é—¨',
  read_time INT DEFAULT 5,
  views INT DEFAULT 0,
  likes INT DEFAULT 0,
  tags JSON,
  related_articles JSON,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (author_id) REFERENCES users(id),
  INDEX idx_category (category),
  INDEX idx_type (type),
  INDEX idx_views (views),
  INDEX idx_likes (likes),
  FULLTEXT INDEX ft_title_content (title, content)
);
```

---

#### knowledge_questions - çŸ¥è¯†åº“é—®ç­”è¡¨ â­ æ–°å¢
```sql
CREATE TABLE knowledge_questions (
  id INT AUTO_INCREMENT PRIMARY KEY,
  question VARCHAR(500) NOT NULL,
  asker_id VARCHAR(50) NOT NULL,
  answer_count INT DEFAULT 0,
  views INT DEFAULT 0,
  best_answer_id INT NULL,
  tags JSON,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (asker_id) REFERENCES users(id),
  INDEX idx_asker (asker_id),
  INDEX idx_views (views),
  FULLTEXT INDEX ft_question (question)
);
```

---

#### knowledge_answers - çŸ¥è¯†åº“å›ç­”è¡¨ â­ æ–°å¢
```sql
CREATE TABLE knowledge_answers (
  id INT AUTO_INCREMENT PRIMARY KEY,
  question_id INT NOT NULL,
  author_id VARCHAR(50) NOT NULL,
  content TEXT NOT NULL,
  likes INT DEFAULT 0,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (question_id) REFERENCES knowledge_questions(id) ON DELETE CASCADE,
  FOREIGN KEY (author_id) REFERENCES users(id),
  INDEX idx_question (question_id),
  INDEX idx_author (author_id),
  INDEX idx_likes (likes)
);
```

---

#### leader_deposits - å›¢é•¿ä¿è¯é‡‘è¡¨ â­ æ–°å¢
```sql
CREATE TABLE leader_deposits (
  id INT AUTO_INCREMENT PRIMARY KEY,
  leader_id VARCHAR(50) NOT NULL UNIQUE,
  deposit_amount DECIMAL(10, 2) DEFAULT 5000.00,
  deposit_status ENUM('active', 'frozen', 'refunded') DEFAULT 'active',
  deposit_interest DECIMAL(10, 2) DEFAULT 0,
  withdrawable_interest DECIMAL(10, 2) DEFAULT 0,
  required_amount DECIMAL(10, 2) DEFAULT 5000.00,
  deposit_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (leader_id) REFERENCES users(id),
  INDEX idx_leader (leader_id),
  INDEX idx_status (deposit_status)
);
```

---

#### deposit_penalty_records - ä¿è¯é‡‘èµ”ä»˜è®°å½•è¡¨ â­ æ–°å¢
```sql
CREATE TABLE deposit_penalty_records (
  id INT AUTO_INCREMENT PRIMARY KEY,
  leader_id VARCHAR(50) NOT NULL,
  order_id VARCHAR(50) NOT NULL,
  reason VARCHAR(255) NOT NULL,
  amount DECIMAL(10, 2) NOT NULL,
  create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (leader_id) REFERENCES users(id),
  FOREIGN KEY (order_id) REFERENCES orders(id),
  INDEX idx_leader (leader_id),
  INDEX idx_order (order_id)
);
```

---

#### escrow_records - è®¢é‡‘æ‰˜ç®¡è®°å½•è¡¨ â­ æ–°å¢
```sql
CREATE TABLE escrow_records (
  id INT AUTO_INCREMENT PRIMARY KEY,
  order_id VARCHAR(50) NOT NULL UNIQUE,
  deposit_status ENUM('escrow', 'settled', 'refunded') DEFAULT 'escrow',
  escrow_amount DECIMAL(10, 2) NOT NULL,
  escrow_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  settle_time TIMESTAMP NULL,
  refund_time TIMESTAMP NULL,
  refund_reason VARCHAR(255),
  FOREIGN KEY (order_id) REFERENCES orders(id),
  INDEX idx_order (order_id),
  INDEX idx_status (deposit_status)
);
```

---

#### payment_reminders - å‚¬æ¬¾è®°å½•è¡¨ â­ æ–°å¢
```sql
CREATE TABLE payment_reminders (
  id INT AUTO_INCREMENT PRIMARY KEY,
  order_id VARCHAR(50) NOT NULL,
  reminder_type ENUM('first', 'second', 'third', 'warning', 'final') NOT NULL,
  channel ENUM('sms', 'wechat', 'app_push', 'phone') NOT NULL,
  message TEXT,
  sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  status ENUM('sent', 'failed', 'delivered') DEFAULT 'sent',
  FOREIGN KEY (order_id) REFERENCES orders(id),
  INDEX idx_order (order_id),
  INDEX idx_sent_at (sent_at)
);
```

---

#### blacklist - ç”¨æˆ·é»‘åå•è¡¨ â­ æ–°å¢
```sql
CREATE TABLE blacklist (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id VARCHAR(50) NOT NULL UNIQUE,
  reason VARCHAR(255) NOT NULL,
  order_id VARCHAR(50),
  owed_amount DECIMAL(10, 2),
  added_by VARCHAR(50) NOT NULL,
  added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  can_remove_after TIMESTAMP NULL,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (order_id) REFERENCES orders(id),
  FOREIGN KEY (added_by) REFERENCES users(id),
  INDEX idx_user (user_id),
  INDEX idx_added_at (added_at)
);
```

---

---

## å…­ã€éƒ¨ç½²è¯´æ˜

### 6.1 ç¯å¢ƒè¦æ±‚

**å‰ç«¯**ï¼š
- Node.js >= 16.0.0
- npm >= 8.0.0

**åç«¯ï¼ˆæœªæ¥ï¼‰**ï¼š
- æ•°æ®åº“ï¼šMySQL 8.0+ / PostgreSQL 13+
- ç¼“å­˜ï¼šRedis 6.0+
- å­˜å‚¨ï¼šé˜¿é‡Œäº‘OSS / ä¸ƒç‰›äº‘
- æ”¯ä»˜ï¼šæ”¯ä»˜å®å¼€æ”¾å¹³å° / å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°

---

### 6.2 æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

---

### 6.3 ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# API Base URL
VITE_API_BASE_URL=https://api.bjdmaster.com/v1

# CDN URL
VITE_CDN_URL=https://cdn.bjdmaster.com

# å¾®ä¿¡AppID
VITE_WECHAT_APPID=wx1234567890abcdef

# æ”¯ä»˜å®AppID
VITE_ALIPAY_APPID=2021001234567890

# åœ°å›¾API Key (é«˜å¾·åœ°å›¾)
VITE_MAP_API_KEY=your_map_api_key
```

---

## ä¸ƒã€å®‰å…¨ä¸ä¼˜åŒ–

### 7.1 å®‰å…¨æªæ–½

**å‰ç«¯**ï¼š
- XSSé˜²æŠ¤ï¼šä½¿ç”¨Reactå†…ç½®è½¬ä¹‰
- CSRFé˜²æŠ¤ï¼šTokenéªŒè¯
- æ•æ„Ÿä¿¡æ¯åŠ å¯†ï¼šæ”¯ä»˜å¯†ç ã€èº«ä»½è¯å·
- HTTPSå¼ºåˆ¶

**åç«¯**ï¼š
- JWT Tokenè®¤è¯
- æ¥å£é™æµï¼šé˜²åˆ·å•
- æ•°æ®åº“åŠ å¯†ï¼šæ•æ„Ÿå­—æ®µAESåŠ å¯†
- æ—¥å¿—è„±æ•

---

### 7.2 æ€§èƒ½ä¼˜åŒ–

**å‰ç«¯**ï¼š
- å›¾ç‰‡æ‡’åŠ è½½
- è·¯ç”±æ‡’åŠ è½½
- è™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿åˆ—è¡¨ï¼‰
- CDNåŠ é€Ÿé™æ€èµ„æº
- Gzipå‹ç¼©
- Service Workerç¼“å­˜

**åç«¯**ï¼š
- Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- CDNå›¾ç‰‡å‹ç¼©
- åˆ†é¡µæŸ¥è¯¢
- æ…¢æŸ¥è¯¢ç›‘æ§

---

## å…«ã€ç‰ˆæœ¬è¿­ä»£

### v1.0.0ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
- âœ… ç”¨æˆ·è®¤è¯ä¸èµ„æ–™ç®¡ç†
- âœ… å›¢è´­å‘å¸ƒä¸è®¢å•ç®¡ç†
- âœ… è½¬å•åŠŸèƒ½
- âœ… ç”µå­åˆåŒç­¾ç½²
- âœ… ç¤¾äº¤å¹¿åœº
- âœ… é€šçŸ¥ç³»ç»Ÿ

### v1.1.0ï¼ˆ2024-12-08æ›´æ–°ï¼‰â­
**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… å¨ƒå¨ƒæ¡£æ¡ˆç®¡ç†ç³»ç»Ÿ
  - å¨ƒå¨ƒåˆ—è¡¨å±•ç¤º
  - å¨ƒå¨ƒè¯¦æƒ…é¡µé¢
  - ä¿å…»è®°å½•ç®¡ç†
  - ç”µå­èº«ä»½è¯ç”Ÿæˆ
- âœ… æˆå°±ç³»ç»Ÿ
  - æˆå°±åˆ—è¡¨ä¸è¿›åº¦
  - è‡ªåŠ¨è§£é”æœºåˆ¶
  - å¥–åŠ±å‘æ”¾
- âœ… BJDçŸ¥è¯†åº“
  - æ–‡ç« åˆ†ç±»æµè§ˆ
  - æœç´¢åŠŸèƒ½
  - çƒ­é—¨é—®ç­”
  - ç‚¹èµæ”¶è—

**APIæ¥å£**ï¼ˆå¾…åç«¯å®ç°ï¼‰ï¼š
- [ ] å¨ƒå¨ƒæ¡£æ¡ˆCRUDæ¥å£
- [ ] æˆå°±ç³»ç»Ÿæ¥å£
- [ ] çŸ¥è¯†åº“å†…å®¹ç®¡ç†æ¥å£
- [ ] è®¢é‡‘æ‰˜ç®¡æ¥å£
- [ ] ä¿è¯é‡‘ç®¡ç†æ¥å£
- [ ] è‡ªåŠ¨å‚¬æ¬¾æ¥å£
- [ ] é»‘åå•ç®¡ç†æ¥å£

**æ•°æ®åº“**ï¼š
- [ ] dolls - å¨ƒå¨ƒæ¡£æ¡ˆè¡¨
- [ ] maintenance_records - ä¿å…»è®°å½•è¡¨
- [ ] achievements - æˆå°±è¡¨
- [ ] user_achievements - ç”¨æˆ·æˆå°±è¡¨
- [ ] knowledge_articles - çŸ¥è¯†åº“æ–‡ç« è¡¨
- [ ] knowledge_questions - çŸ¥è¯†åº“é—®ç­”è¡¨
- [ ] leader_deposits - å›¢é•¿ä¿è¯é‡‘è¡¨
- [ ] escrow_records - è®¢é‡‘æ‰˜ç®¡è®°å½•è¡¨
- [ ] payment_reminders - å‚¬æ¬¾è®°å½•è¡¨
- [ ] blacklist - é»‘åå•è¡¨

### v1.2.0ï¼ˆè§„åˆ’ä¸­ï¼‰
- [ ] åœ¨çº¿æ”¯ä»˜å¯¹æ¥
- [ ] ç‰©æµè‡ªåŠ¨æŸ¥è¯¢
- [ ] AIæ–‡æ¡ˆåŠ©æ‰‹å®ç°
- [ ] æ¶ˆæ¯èŠå¤©åŠŸèƒ½
- [ ] å¼€ç®±è§†é¢‘å½•åˆ¶
- [ ] æ™ºèƒ½å®šä»·åŠ©æ‰‹
- [ ] è¿›åº¦é€šçŸ¥è‡ªåŠ¨åŒ–
- [ ] æ¯å‘¨ä¹‹æ˜Ÿ/å¨ƒå¨ƒé€‰ç¾

---

## ä¹ã€é™„å½•

### 9.1 é”™è¯¯ç è¡¨

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 10001 | æ‰‹æœºå·æ ¼å¼é”™è¯¯ |
| 10002 | éªŒè¯ç é”™è¯¯ |
| 10003 | éªŒè¯ç å·²è¿‡æœŸ |
| 10004 | å¯†ç æ ¼å¼é”™è¯¯ |
| 10005 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 10006 | å¯†ç é”™è¯¯ |
| 20001 | å›¢è´­ä¸å­˜åœ¨ |
| 20002 | å›¢è´­å·²æˆªå›¢ |
| 20003 | SKUåº“å­˜ä¸è¶³ |
| 30001 | è®¢å•ä¸å­˜åœ¨ |
| 30002 | è®¢å•çŠ¶æ€é”™è¯¯ |
| 30003 | æ”¯ä»˜é‡‘é¢é”™è¯¯ |
| 40001 | è½¬å•ç æ— æ•ˆ |
| 40002 | è½¬å•ç å·²è¿‡æœŸ |
| 40003 | è½¬å•ç å·²ä½¿ç”¨ |
| 50001 | æœªå®åè®¤è¯ |
| 50002 | ä¿¡ç”¨åˆ†ä¸è¶³ |
| 50003 | è´¦å·å·²è¢«å°ç¦ |

---

### 9.2 çŠ¶æ€ç æ˜ å°„

**è®¢å•çŠ¶æ€è‹±æ–‡ -> ä¸­æ–‡**ï¼š
```
unpaid_deposit  -> å¾…ä»˜å®šé‡‘
wait_verify     -> å¾…å®¡æ ¸
production      -> åˆ¶ä½œä¸­
wait_final      -> å¾…è¡¥æ¬¾
wait_ship       -> å¾…å‘è´§
shipped         -> å·²å‘è´§
completed       -> å·²å®Œæˆ
transferred     -> å·²è½¬å•
```

---

**æ–‡æ¡£ç»“æŸ**

